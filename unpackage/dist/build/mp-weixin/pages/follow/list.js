"use strict";const e=require("../../common/vendor.js"),s=require("../../common/assets.js"),a=require("../../api/api.js"),o=e.defineComponent({__name:"list",setup(o){const t=e.ref([]),n=e.ref(""),r=()=>{e.index.switchTab({url:"/pages/index/index"})};return e.onShow((async()=>{const s=e.index.getStorageSync("userInfo");t.value=[],s&&(n.value=JSON.parse(s).userId,await(async()=>{try{const e=await a.getFollowingList(n.value);t.value=[];for(const s of e){const e=await a.getUserInfo(s),o={userID:e.userID,userName:e.userName,worksCount:JSON.parse(e.release).length,avatar:e.avatar};t.value.push(o)}}catch(e){console.log(e)}})())})),(o,u)=>e.e({a:t.value.length>0},t.value.length>0?e.e({b:e.f(t.value,((s,o,r)=>({a:e.t(s.userName),b:e.t(s.worksCount||0),c:e.o((r=>(async(s,o)=>{e.index.showModal({title:"提示",content:"确定要取消关注该用户吗？",success:async r=>{if(r.confirm)try{await a.unfollow(n.value,s),t.value.splice(o,1),e.index.showToast({title:"已取消关注",icon:"success"})}catch(u){console.log(u),e.index.showToast({title:"操作失败，请稍后重试",icon:"none"})}}})})(s.userID,o)),o),d:o,e:e.o((a=>{return o=s.userID,void e.index.navigateTo({url:`/pages/follow/works?userID=${o}`});var o}),o)}))),c:s._imports_0,d:t.value.length>5},(t.value.length,{})):{e:s._imports_3,f:e.o(r)})}}),t=e._export_sfc(o,[["__scopeId","data-v-cee05db5"]]);wx.createPage(t);
