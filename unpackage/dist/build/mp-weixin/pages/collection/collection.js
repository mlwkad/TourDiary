"use strict";const e=require("../../common/vendor.js"),t=require("../../common/assets.js"),o=require("../../api/api.js"),n=e.defineComponent({__name:"collection",setup(n){const s=e.ref([]);e.ref(!1);let a=e.ref("");const i=()=>{e.index.switchTab({url:"/pages/index/index"})};return e.onShow((()=>{a=JSON.parse(e.index.getStorageSync("userInfo")).userId,o.getUserLiked(a).then((e=>{s.value=e}))})),(n,c)=>e.e({a:s.value.length>0},s.value.length>0?e.e({b:e.f(s.value,((t,n,i)=>({a:e.t(t.title),b:e.t(t.content),c:e.t(t.createdAt.slice(0,10)),d:e.o((n=>{return i=t.releaseID,void e.index.showModal({title:"提示",content:"确定要移除这个收藏吗？",success:async t=>{if(t.confirm)try{await o.removeLiked(a,i);const t=await o.getUserLiked(a);s.value=t,e.index.showToast({title:"已移除收藏",icon:"success"})}catch(n){console.log(n),e.index.showToast({title:"操作失败",icon:"none"})}}});var i}),n),e:n,f:e.o((n=>(async t=>{try{const n=await o.getReleaseDetail(t);e.index.navigateTo({url:`/pages/detail/detail?info=${encodeURIComponent(JSON.stringify(n))}`})}catch(n){console.log(n),e.index.showToast({title:"获取详情失败",icon:"none"})}})(t.releaseID)),n)}))),c:t._imports_0,d:t._imports_1$1,e:s.value.length>5},(s.value.length,{})):{f:t._imports_3,g:e.o(i)})}}),s=e._export_sfc(n,[["__scopeId","data-v-2e94c9a2"]]);wx.createPage(s);
