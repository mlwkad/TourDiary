{"version":3,"file":"http.js","sources":["api/http.js"],"sourcesContent":["let baseUrl = ''\r\n\r\n// 判断环境\r\nif (process.env.NODE_ENV === 'development') {\r\n    baseUrl = 'http://localhost:3000'\r\n} else {\r\n    // baseUrl: 'http://localhost:3000'\r\n}\r\n\r\nexport default function http(url, data = {}, method = 'GET') {\r\n    return new Promise((resolve, reject) => {\r\n        uni.request({\r\n            url: baseUrl + url,\r\n            data,\r\n            method,\r\n            hearder: {\r\n                'token': uni.getStorageSync('token') || ''\r\n            },\r\n            success: (res) => {\r\n                if (res.statusCode === 200) {  // 请求成功\r\n                    console.log(666)\r\n                    if (res.data.code === 1) {  // 业务正常\r\n                        resolve(res.data.data)\r\n                    }\r\n                    else if (res.data.code === 0) {\r\n                        uni.showToast({\r\n                            title: res.data.message,\r\n                            icon: 'none'\r\n                        })\r\n                        reject(res.data.message)\r\n                    }\r\n                }\r\n            },\r\n            fail: () => {\r\n                uni.showToast({\r\n                    title: '服务请求异常',\r\n                    icon: 'none'\r\n                })\r\n            }\r\n        })\r\n    })\r\n}\r\n"],"names":["uni"],"mappings":";;AAAA,IAAI,UAAU;AAG8B;AAC9B,YAAA;AACd;AAIA,SAAwB,KAAK,KAAK,OAAO,CAAA,GAAI,SAAS,OAAO;AACzD,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpCA,kBAAAA,MAAI,QAAQ;AAAA,MACR,KAAK,UAAU;AAAA,MACf;AAAA,MACA;AAAA,MACA,SAAS;AAAA,QACL,SAASA,cAAA,MAAI,eAAe,OAAO,KAAK;AAAA,MAC5C;AAAA,MACA,SAAS,CAAC,QAAQ;AACV,YAAA,IAAI,eAAe,KAAK;gEACZ,GAAG;AACX,cAAA,IAAI,KAAK,SAAS,GAAG;AACb,oBAAA,IAAI,KAAK,IAAI;AAAA,UAEhB,WAAA,IAAI,KAAK,SAAS,GAAG;AAC1BA,0BAAAA,MAAI,UAAU;AAAA,cACV,OAAO,IAAI,KAAK;AAAA,cAChB,MAAM;AAAA,YAAA,CACT;AACM,mBAAA,IAAI,KAAK,OAAO;AAAA,UAC3B;AAAA,QACJ;AAAA,MACJ;AAAA,MACA,MAAM,MAAM;AACRA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACT;AAAA,MACL;AAAA,IAAA,CACH;AAAA,EAAA,CACJ;AACL;;"}