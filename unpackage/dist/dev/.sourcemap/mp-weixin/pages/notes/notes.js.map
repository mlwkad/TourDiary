{"version":3,"file":"notes.js","sources":["pages/notes/notes.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbm90ZXMvbm90ZXMudnVl"],"sourcesContent":["<template>\r\n    <view class=\"notes-container\">\r\n        <!-- 内容区域 -->\r\n        <scroll-view scroll-y class=\"content-area\" refresher-enabled @refresherrefresh=\"onRefresh\"\r\n            :refresher-triggered=\"isRefreshing\">\r\n            <!-- 笔记列表 -->\r\n            <template v-if=\"notes.length > 0\">\r\n                <view class=\"notes-list\">\r\n                    <view class=\"note-item\" v-for=\"(note, index) in notes\" :key=\"index\"\r\n                        @click=\"viewNote(note.releaseID)\">\r\n                        <view class=\"note-header\">\r\n                            <view class=\"note-title\">{{ note.title }}</view>\r\n                            <view class=\"note-actions\">\r\n                                <image class=\"action-icon\" src=\"/static/public/close.png\"\r\n                                    @click.stop=\"deleteNote(note.id, index)\"></image>\r\n                            </view>\r\n                        </view>\r\n                        <view class=\"note-content\" v-if=\"note.content\">{{ note.content }}</view>\r\n                        <view class=\"note-meta\">\r\n                            <view class=\"note-location\" v-if=\"note.location\">\r\n                                <image class=\"location-icon\" src=\"/static/public/search.png\"></image>\r\n                                <text>{{ note.location }}</text>\r\n                            </view>\r\n                            <view class=\"note-date\">{{ note.createdAt.slice(0,10) }}</view>\r\n                        </view>\r\n                        <view class=\"note-images\" v-if=\"note.pictures && note.pictures.length\">\r\n                            <image v-for=\"(img, imgIndex) in note.pictures\" :key=\"imgIndex\" :src=\"img\" mode=\"aspectFill\"\r\n                                @click.stop=\"previewImage(note.pictures, imgIndex)\"></image>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </template>\r\n            <template v-else>\r\n                <view class=\"empty-state\">\r\n                    <image class=\"empty-icon\" src=\"/static/public/search.png\" mode=\"aspectFit\"></image>\r\n                    <view class=\"empty-text\">暂无笔记内容</view>\r\n                    <view class=\"empty-action\" @click=\"createNote\">创建新笔记</view>\r\n                </view>\r\n            </template>\r\n        </scroll-view>\r\n\r\n        <!-- 悬浮添加按钮 -->\r\n        <image class=\"add-button\" src=\"/static/public/add.png\" @click=\"createNote\"></image>\r\n    </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, computed, onMounted } from 'vue';\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport { getUserReleases, getReleaseDetail } from '../../api/api';\r\n\r\n// 笔记数据\r\nconst notes = ref<any[]>([]);\r\nconst isRefreshing = ref(false);\r\nconst currentFilter = ref('all');\r\n\r\n// 查看笔记详情\r\nconst viewNote = async (releaseID: string) => {\r\n    const info = await getReleaseDetail(releaseID)\r\n    uni.navigateTo({\r\n        url: `/pages/detail/detail?info=${encodeURIComponent(JSON.stringify(info))}`\r\n    });\r\n};\r\n\r\n// 删除笔记\r\nconst deleteNote = (id: string, index: number) => {\r\n    uni.showModal({\r\n        title: '提示',\r\n        content: '确定要删除这个笔记吗？',\r\n        success: (res) => {\r\n            if (res.confirm) {\r\n                // 这里应该调用API删除笔记\r\n                notes.value.splice(index, 1);\r\n                uni.showToast({\r\n                    title: '已删除',\r\n                    icon: 'success'\r\n                });\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n// 创建新笔记\r\nconst createNote = () => {\r\n    uni.reLaunch({\r\n        url: '/pages/Release/Release'\r\n    });\r\n};\r\n\r\n// 设置筛选条件\r\nconst setFilter = (filter: string) => {\r\n    currentFilter.value = filter;\r\n};\r\n\r\n// 刷新数据\r\nconst onRefresh = async () => {\r\n    isRefreshing.value = true;\r\n    const userID = JSON.parse(uni.getStorageSync('userInfo')).userId\r\n    const res = await getUserReleases(userID)\r\n    notes.value = res\r\n};\r\n\r\n// 预览图片\r\nconst previewImage = (images: string[], current: number) => {\r\n    uni.previewImage({\r\n        urls: images,  // [url1,url2] 图片地址数组  \r\n        current: images[current]  // 当前显示的图片索引\r\n    });\r\n};\r\n\r\nonLoad(async () => {\r\n    const userID = JSON.parse(uni.getStorageSync('userInfo')).userId\r\n    const res = await getUserReleases(userID)\r\n    notes.value = res\r\n})\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.notes-container {\r\n    width: 100%;\r\n    min-height: 100vh;\r\n    background-color: #f8f8f8;\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: relative;\r\n\r\n    .content-area {\r\n        flex: 1;\r\n\r\n        .filter-menu {\r\n            display: flex;\r\n            background-color: #fff;\r\n            padding: 20rpx;\r\n            margin-bottom: 15rpx;\r\n\r\n            .filter-item {\r\n                flex: 1;\r\n                text-align: center;\r\n                font-size: 28rpx;\r\n                color: #666;\r\n                padding: 10rpx 0;\r\n                position: relative;\r\n\r\n                &.active {\r\n                    color: #4bb0ff;\r\n                    font-weight: bold;\r\n\r\n                    &:after {\r\n                        content: '';\r\n                        position: absolute;\r\n                        bottom: 0;\r\n                        left: 50%;\r\n                        transform: translateX(-50%);\r\n                        width: 30rpx;\r\n                        height: 4rpx;\r\n                        background-color: #4bb0ff;\r\n                        border-radius: 2rpx;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .notes-list {\r\n            padding: 0 20rpx;\r\n\r\n            .note-item {\r\n                background-color: #fff;\r\n                border-radius: 12rpx;\r\n                margin-bottom: 20rpx;\r\n                padding: 25rpx;\r\n                box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\r\n                .note-header {\r\n                    display: flex;\r\n                    justify-content: space-between;\r\n                    align-items: center;\r\n                    margin-bottom: 15rpx;\r\n\r\n                    .note-title {\r\n                        font-size: 34rpx;\r\n                        font-weight: bold;\r\n                        color: #333;\r\n                    }\r\n\r\n                    .note-actions {\r\n                        display: flex;\r\n                        gap: 15rpx;\r\n\r\n                        .action-icon {\r\n                            width: 36rpx;\r\n                            height: 36rpx;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                .note-content {\r\n                    font-size: 28rpx;\r\n                    color: #666;\r\n                    margin-bottom: 20rpx;\r\n                    line-height: 1.5;\r\n                    display: -webkit-box;\r\n                    -webkit-line-clamp: 3;\r\n                    -webkit-box-orient: vertical;\r\n                    overflow: hidden;\r\n                }\r\n\r\n                .note-meta {\r\n                    display: flex;\r\n                    justify-content: space-between;\r\n                    align-items: center;\r\n                    margin-bottom: 15rpx;\r\n\r\n                    .note-location {\r\n                        display: flex;\r\n                        align-items: center;\r\n                        font-size: 24rpx;\r\n                        color: #999;\r\n\r\n                        .location-icon {\r\n                            width: 24rpx;\r\n                            height: 24rpx;\r\n                            margin-right: 6rpx;\r\n                        }\r\n                    }\r\n\r\n                    .note-date {\r\n                        font-size: 24rpx;\r\n                        color: #999;\r\n                    }\r\n                }\r\n\r\n                .note-images {\r\n                    display: flex;\r\n                    gap: 10rpx;\r\n                    margin-top: 15rpx;\r\n\r\n                    image {\r\n                        width: 150rpx;\r\n                        height: 150rpx;\r\n                        border-radius: 8rpx;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .empty-state {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            justify-content: center;\r\n            padding: 100rpx 0;\r\n\r\n            .empty-icon {\r\n                width: 200rpx;\r\n                height: 200rpx;\r\n                margin-bottom: 30rpx;\r\n                opacity: 0.5;\r\n            }\r\n\r\n            .empty-text {\r\n                font-size: 32rpx;\r\n                color: #999;\r\n                margin-bottom: 30rpx;\r\n            }\r\n\r\n            .empty-action {\r\n                font-size: 28rpx;\r\n                color: #fff;\r\n                padding: 20rpx 40rpx;\r\n                background: linear-gradient(to right, #4bb0ff, #61e4ff);\r\n                border-radius: 30rpx;\r\n            }\r\n        }\r\n    }\r\n\r\n    .add-button {\r\n        position: fixed;\r\n        right: 40rpx;\r\n        bottom: 60rpx;\r\n        width: 100rpx;\r\n        height: 100rpx;\r\n        border-radius: 50%;\r\n        z-index: 10;\r\n    }\r\n}\r\n</style>","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/notes/notes.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getReleaseDetail","uni","getUserReleases","onLoad"],"mappings":";;;;;;;AAoDM,UAAA,QAAQA,kBAAW,CAAA,CAAE;AACrB,UAAA,eAAeA,kBAAI,KAAK;AACRA,kBAAAA,IAAI,KAAK;AAGzB,UAAA,WAAW,OAAO,cAAsB;AACpC,YAAA,OAAO,MAAMC,yBAAiB,SAAS;AAC7CC,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK,6BAA6B,mBAAmB,KAAK,UAAU,IAAI,CAAC,CAAC;AAAA,MAAA,CAC7E;AAAA,IAAA;AAIC,UAAA,aAAa,CAAC,IAAY,UAAkB;AAC9CA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACd,cAAI,IAAI,SAAS;AAEP,kBAAA,MAAM,OAAO,OAAO,CAAC;AAC3BA,0BAAAA,MAAI,UAAU;AAAA,cACV,OAAO;AAAA,cACP,MAAM;AAAA,YAAA,CACT;AAAA,UACL;AAAA,QACJ;AAAA,MAAA,CACH;AAAA,IAAA;AAIL,UAAM,aAAa,MAAM;AACrBA,oBAAAA,MAAI,SAAS;AAAA,QACT,KAAK;AAAA,MAAA,CACR;AAAA,IAAA;AASL,UAAM,YAAY,YAAY;AAC1B,mBAAa,QAAQ;AACrB,YAAM,SAAS,KAAK,MAAMA,cAAAA,MAAI,eAAe,UAAU,CAAC,EAAE;AACpD,YAAA,MAAM,MAAMC,wBAAgB,MAAM;AACxC,YAAM,QAAQ;AAAA,IAAA;AAIZ,UAAA,eAAe,CAAC,QAAkB,YAAoB;AACxDD,oBAAAA,MAAI,aAAa;AAAA,QACb,MAAM;AAAA;AAAA,QACN,SAAS,OAAO,OAAO;AAAA;AAAA,MAAA,CAC1B;AAAA,IAAA;AAGLE,kBAAAA,OAAO,YAAY;AACf,YAAM,SAAS,KAAK,MAAMF,cAAAA,MAAI,eAAe,UAAU,CAAC,EAAE;AACpD,YAAA,MAAM,MAAMC,wBAAgB,MAAM;AACxC,YAAM,QAAQ;AAAA,IAAA,CACjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjHD,GAAG,WAAW,eAAe;"}