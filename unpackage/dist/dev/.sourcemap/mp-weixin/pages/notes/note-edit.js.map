{"version":3,"file":"note-edit.js","sources":["pages/notes/note-edit.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbm90ZXMvbm90ZS1lZGl0LnZ1ZQ"],"sourcesContent":["<template>\r\n    <view class=\"note-edit-container\">\r\n        <!-- 编辑区域 -->\r\n        <scroll-view scroll-y class=\"edit-area\">\r\n            <input class=\"note-title-input\" placeholder=\"请输入标题...\" v-model=\"note.title\" maxlength=\"50\"\r\n                @input=\"errors.title = ''\" />\r\n            <view class=\"error-text\" v-if=\"errors.title\">{{ errors.title }}</view>\r\n            <view class=\"location-selector\" @click=\"chooseLocation\">\r\n                <image src=\"/static/public/search.png\" mode=\"aspectFit\"></image>\r\n                <text v-if=\"note.location\">{{ note.location }}</text>\r\n                <text v-else class=\"placeholder\">添加位置</text>\r\n            </view>\r\n            <view class=\"error-text\" v-if=\"errors.location\">{{ errors.location }}</view>\r\n            <view class=\"detail-info\">\r\n                <view class=\"info-item\">\r\n                    <image src=\"/static/public/money.png\" class=\"info-icon\"></image>\r\n                    <input class=\"info-icon-content\" v-model=\"note.money\" @input=\"errors.money = ''\" />元\r\n                </view>\r\n                <view class=\"info-item\">\r\n                    <image src=\"/static/public/person.png\" class=\"info-icon\"></image>\r\n                    <input class=\"info-icon-content\" v-model=\"note.personNum\" @input=\"errors.personNum = ''\" />人\r\n                </view>\r\n                <view class=\"info-item\">\r\n                    <image src=\"/static/public/time.png\" class=\"info-icon\"></image>\r\n                    <input class=\"info-icon-content\" v-model=\"note.playTime\" @input=\"errors.playTime = ''\" />分钟\r\n                </view>\r\n            </view>\r\n            <view class=\"detail-errors\">\r\n                <view class=\"error-text\" v-if=\"errors.money\">费用: {{ errors.money }}</view>\r\n                <view class=\"error-text\" v-if=\"errors.personNum\">人数: {{ errors.personNum }}</view>\r\n                <view class=\"error-text\" v-if=\"errors.playTime\">时间: {{ errors.playTime }}</view>\r\n            </view>\r\n            <view class=\"note-content-input\">\r\n                <textarea class=\"note-content-input-content\" placeholder=\"写下你的旅行记录...\" v-model=\"note.content\"\r\n                    maxlength=\"5000\" auto-height @input=\"errors.content = ''\" />\r\n            </view>\r\n            <view class=\"error-text\" v-if=\"errors.content\">{{ errors.content }}</view>\r\n            <view class=\"image-section\">\r\n                <view class=\"image-list\">\r\n                    <view class=\"image-item\" v-for=\"(img, index) in note.pictures\" :key=\"index\">\r\n                        <image class=\"preview-image\" :src=\"img\" mode=\"aspectFill\"></image>\r\n                        <view class=\"delete-btn\" @click=\"removeImage(index)\">\r\n                            <view style=\"color: white;\">×</view>\r\n                            <!-- <image src=\"/static/public/close.png\" mode=\"aspectFit\"></image> -->\r\n                        </view>\r\n                    </view>\r\n                    <view class=\"add-image-btn\" @click=\"chooseImage\" v-if=\"note.pictures.length < 9\">\r\n                        <text>+</text>\r\n                        <text class=\"add-text\">添加图片</text>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n            <view class=\"error-text\" v-if=\"errors.pictures\">{{ errors.pictures }}</view>\r\n            <view class=\"video-section\" v-if=\"note.videos && note.videos.length > 0\">\r\n                <view class=\"video-container\">\r\n                    <video class=\"preview-video\" :src=\"note.videos[0]\" controls></video>\r\n                    <view class=\"delete-btn\" @click=\"removeVideo\">\r\n                        <image src=\"/static/public/close.png\" mode=\"aspectFit\"></image>\r\n                    </view>\r\n                </view>\r\n                <view class=\"video-cover-section\">\r\n                    <text class=\"section-title\">视频封面</text>\r\n                    <view class=\"cover-container\">\r\n                        <view class=\"cover-preview-wrapper\" v-if=\"note.cover\">\r\n                            <image class=\"cover-preview\" :src=\"note.cover\" mode=\"aspectFill\"></image>\r\n                            <view class=\"delete-btn\" @click=\"removeCover\">\r\n                                <image src=\"/static/public/close.png\" mode=\"aspectFit\"></image>\r\n                            </view>\r\n                        </view>\r\n                        <view class=\"add-cover-btn\" @click=\"chooseVideoCover\" v-if=\"!note.cover\">\r\n                            <text>+</text>\r\n                            <text style=\"font-size:28rpx;\">添加封面</text>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n            <view class=\"add-video-btn\" @click=\"chooseVideo\" v-if=\"!note.videos || note.videos.length === 0\">\r\n                <text class=\"add-icon\">+</text>\r\n                <text class=\"add-text\" style=\"color: grey;\">添加视频</text>\r\n            </view>\r\n        </scroll-view>\r\n        <!-- 底部保存按钮 -->\r\n        <view class=\"save-button\" @click=\"saveNote\">保存笔记</view>\r\n    </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive } from 'vue'\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport { updateRelease, uploadFiles } from '../../api/api'\r\nimport { validateTitle, validateContent, validateLocation } from '../../utils/filter'\r\n\r\n// 笔记数据\r\nconst note = reactive({\r\n    id: '',\r\n    title: '',\r\n    content: '',\r\n    location: '',\r\n    createdAt: '',\r\n    playTime: '',\r\n    money: '',\r\n    personNum: '',\r\n    pictures: [] as string[],\r\n    videos: [] as string[],\r\n    cover: ''\r\n})\r\n\r\n// 错误信息\r\nconst errors = reactive({\r\n    title: '',\r\n    content: '',\r\n    location: '',\r\n    playTime: '',\r\n    money: '',\r\n    personNum: '',\r\n    pictures: ''\r\n})\r\n\r\n// 清除所有错误信息\r\nconst clearErrors = () => {\r\n    for (let key in errors) {\r\n        errors[key] = ''\r\n    }\r\n}\r\n\r\n// 获取笔记详情\r\nconst getNoteDetail = (info: any) => {\r\n    Object.assign(note, {\r\n        id: info.releaseID,\r\n        title: info.title,\r\n        content: info.content,\r\n        location: info.location,\r\n        createdAt: info.createdAt,\r\n        pictures: info.pictures,\r\n        playTime: info.playTime,\r\n        money: info.money,\r\n        personNum: info.personNum,\r\n        videos: info.videos,\r\n        cover: info.cover || ''\r\n    })\r\n}\r\n\r\n// 验证表单\r\nconst validateForm = () => {\r\n    let isValid = true\r\n    // 清除所有错误\r\n    clearErrors()\r\n    // 标题验证\r\n    const titleVal = validateTitle(note.title)\r\n    if (!titleVal.isValid) {\r\n        errors.title = titleVal.message\r\n        isValid = false\r\n    } else {\r\n        // 使用过滤后的文本\r\n        note.title = titleVal.filteredText\r\n    }\r\n    // 内容验证\r\n    const contentVal = validateContent(note.content);\r\n    if (!contentVal.isValid) {\r\n        errors.content = contentVal.message\r\n        isValid = false\r\n    } else {\r\n        note.content = contentVal.filteredText\r\n    }\r\n    // 位置验证\r\n    if (note.location) {\r\n        const locationVal = validateLocation(note.location);\r\n        if (!locationVal.isValid) {\r\n            errors.location = locationVal.message\r\n            isValid = false\r\n        } else {\r\n            note.location = locationVal.filteredText\r\n        }\r\n    }\r\n    // 游玩时间验证\r\n    if (note.playTime && (isNaN(Number(note.playTime)) || Number(note.playTime) <= 0)) {\r\n        errors.playTime = '请输入有效的游玩时间'\r\n        isValid = false\r\n    }\r\n    // 费用验证\r\n    if (note.money && (isNaN(Number(note.money)) || Number(note.money) < 0)) {\r\n        errors.money = '请输入有效的费用金额'\r\n        isValid = false\r\n    }\r\n    // 人数验证\r\n    if (note.personNum && (isNaN(Number(note.personNum)) || Number(note.personNum) <= 0 || !Number.isInteger(Number(note.personNum)))) {\r\n        errors.personNum = '请输入有效的人数'\r\n        isValid = false\r\n    }\r\n    // 图片验证\r\n    if (!note.pictures || note.pictures.length === 0) {\r\n        errors.pictures = '至少上传一张图片'\r\n        isValid = false\r\n    }\r\n    return isValid\r\n}\r\n\r\n// 保存笔记\r\nconst saveNote = async () => {\r\n    // 使用验证函数验证表单\r\n    if (!validateForm()) {\r\n        return // 如果验证失败，直接返回\r\n    }\r\n    uni.showLoading({\r\n        title: '正在处理...'\r\n    })\r\n    try {\r\n        if (note.pictures.length > 0) {\r\n            // 过滤掉已经上传的图片(以https://objectstorageapi开头的URL)\r\n            const newPictures = note.pictures.filter(pic => !String(pic).startsWith('https://objectstorageapi'))\r\n            const existingPictures = note.pictures.filter(pic => String(pic).startsWith('https://objectstorageapi'))\r\n            if (newPictures.length > 0) {\r\n                const pictureRes = await uploadFiles(newPictures, 'image')\r\n                note.pictures = [...existingPictures, ...pictureRes.pictures]\r\n            } else {\r\n                note.pictures = [...existingPictures]\r\n            }\r\n        }\r\n        if (note.videos.length > 0) {\r\n            const newVideos = note.videos.filter(video => !String(video).startsWith('https://objectstorageapi'))\r\n            const existingVideos = note.videos.filter(video => String(video).startsWith('https://objectstorageapi'))\r\n            if (newVideos.length > 0) {\r\n                const videoRes = await uploadFiles(newVideos, 'video')\r\n                note.videos = [...existingVideos, ...videoRes.videos]\r\n            } else {\r\n                note.videos = [...existingVideos]\r\n            }\r\n        } else {\r\n            note.videos = []\r\n        }\r\n        if (note.cover) {\r\n            if (!String(note.cover).startsWith('https://objectstorageapi')) {\r\n                const coverRes = await uploadFiles(note.cover, 'cover')\r\n                note.cover = coverRes.covers[0]\r\n            }\r\n        } else {\r\n            note.cover = ''\r\n        }\r\n        // 更新笔记\r\n        await updateRelease(note.id, note)\r\n        uni.hideLoading()\r\n        uni.showToast({\r\n            title: '保存成功',\r\n            icon: 'success'\r\n        })\r\n        setTimeout(() => {\r\n            uni.navigateBack()\r\n        }, 1000)\r\n    } catch (e) {\r\n        uni.__f__('log','at pages/notes/note-edit.vue:250',e)\r\n        uni.hideLoading()\r\n        uni.showToast({\r\n            title: '保存失败',\r\n            icon: 'error'\r\n        })\r\n    }\r\n}\r\n\r\n// 选择位置\r\nconst chooseLocation = () => {\r\n    uni.chooseLocation({\r\n        success: (res) => {\r\n            note.location = res.name || res.address\r\n            // 清除位置错误信息\r\n            errors.location = ''\r\n        },\r\n        fail: (err) => {\r\n            // 用户取消或发生错误\r\n            uni.__f__('error','at pages/notes/note-edit.vue:269','选择位置失败', err)\r\n        }\r\n    })\r\n}\r\n\r\n// 选择图片\r\nconst chooseImage = () => {\r\n    uni.chooseImage({\r\n        count: 5 - note.pictures.length,  // 限制最多5张图片\r\n        sizeType: ['compressed'],  // 压缩后的图片\r\n        sourceType: ['album', 'camera'],  // 可以来自相册或相机\r\n        success: (res) => {\r\n            uni.showLoading({ title: '处理图片中...' })\r\n            let count = 0\r\n            const totalImages = res.tempFilePaths.length\r\n            res.tempFilePaths.forEach(imagePath => {\r\n                uni.compressImage({\r\n                    src: imagePath,\r\n                    quality: 80,  // 压缩质量(0-100),正比于照片质量,反比于压缩率\r\n                    success: (compressRes) => {\r\n                        note.pictures.push(compressRes.tempFilePath)\r\n                        count++\r\n                        if (count >= totalImages) {\r\n                            uni.hideLoading()\r\n                        }\r\n                    },\r\n                    fail: () => {\r\n                        // 压缩失败则使用原图\r\n                        note.pictures.push(imagePath)\r\n                        uni.showToast({\r\n                            title: '部分图片压缩失败',\r\n                            icon: 'none',\r\n                            duration: 1000\r\n                        })\r\n                        count++\r\n                        if (count >= totalImages) {\r\n                            uni.hideLoading()\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n            // 清除图片错误信息\r\n            errors.pictures = ''\r\n        }\r\n    })\r\n}\r\n\r\n// 移除图片\r\nconst removeImage = (index: number) => {\r\n    note.pictures.splice(index, 1)\r\n}\r\n\r\n// 选择视频\r\nconst chooseVideo = () => {\r\n    uni.chooseVideo({\r\n        count: 1,\r\n        compressed: true, // 开启视频压缩\r\n        sourceType: ['album', 'camera'],\r\n        success: (res) => {\r\n            uni.showLoading({ title: '处理视频中...' })\r\n            // 视频大小和时长检查\r\n            uni.getVideoInfo({\r\n                src: res.tempFilePath,\r\n                success: (videoInfo) => {\r\n                    uni.hideLoading()\r\n                    if (videoInfo.duration > 60) {\r\n                        uni.showToast({\r\n                            title: '视频时长不能超过1分钟',\r\n                            icon: 'none'\r\n                        })\r\n                    } else {\r\n                        note.videos = [res.tempFilePath]\r\n                    }\r\n                },\r\n                fail: () => {\r\n                    uni.hideLoading()\r\n                    note.videos = [res.tempFilePath]\r\n                }\r\n            })\r\n        }\r\n    })\r\n}\r\n\r\n// 移除视频\r\nconst removeVideo = () => {\r\n    note.videos = []\r\n}\r\n\r\n// 选择视频封面\r\nconst chooseVideoCover = () => {\r\n    uni.chooseImage({\r\n        count: 1,\r\n        sizeType: ['compressed'],\r\n        sourceType: ['album', 'camera'],\r\n        success: (res) => {\r\n            uni.showLoading({ title: '处理封面中...' })\r\n            uni.compressImage({\r\n                src: res.tempFilePaths[0],\r\n                quality: 80,\r\n                success: (compressRes) => {\r\n                    uni.hideLoading()\r\n                    note.cover = compressRes.tempFilePath\r\n                },\r\n                fail: () => {\r\n                    uni.hideLoading()\r\n                    // 压缩失败则使用原图\r\n                    note.cover = res.tempFilePaths[0]\r\n                    uni.showToast({\r\n                        title: '封面压缩失败',\r\n                        icon: 'none',\r\n                        duration: 1000\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    })\r\n}\r\n\r\n// 移除视频封面\r\nconst removeCover = () => {\r\n    note.cover = ''\r\n}\r\n\r\nonLoad((options) => {\r\n    if (options.info) {\r\n        const info = JSON.parse(decodeURIComponent(options.info))\r\n        getNoteDetail(info)\r\n        uni.setNavigationBarTitle({\r\n            title: '编辑笔记'\r\n        })\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.note-edit-container {\r\n    width: 100%;\r\n    min-height: 100vh;\r\n    background: linear-gradient(to bottom, #f0f5ff, #ffffff);\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: relative;\r\n    padding-bottom: 120rpx;\r\n\r\n    &::before {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        height: 400rpx;\r\n        background: linear-gradient(135deg, rgba(52, 148, 230, 0.15), rgba(236, 110, 173, 0.1));\r\n        z-index: -1;\r\n        border-radius: 0 0 30% 30%;\r\n    }\r\n\r\n    &::after {\r\n        content: '';\r\n        position: absolute;\r\n        top: 20%;\r\n        right: 10%;\r\n        width: 100rpx;\r\n        height: 100rpx;\r\n        border-radius: 50%;\r\n        background: linear-gradient(135deg, rgba(236, 110, 173, 0.2), rgba(52, 148, 230, 0.1));\r\n        filter: blur(30rpx);\r\n        z-index: -1;\r\n    }\r\n\r\n    .edit-area {\r\n        flex: 1;\r\n        padding: 30rpx;\r\n        margin-left: 5rpx;\r\n        width: 98%;\r\n\r\n        .note-title-input {\r\n            font-size: 36rpx;\r\n            font-weight: bold;\r\n            padding: 20rpx 0;\r\n            border-bottom: 1rpx solid rgba(52, 148, 230, 0.2);\r\n            margin-bottom: 20rpx;\r\n            background: linear-gradient(90deg, #3494E6, #555);\r\n            -webkit-background-clip: text;\r\n            background-clip: text;\r\n            color: black;\r\n            text-shadow: 1rpx 1rpx 2rpx rgba(0, 0, 0, 0.1);\r\n        }\r\n\r\n        .location-selector {\r\n            display: flex;\r\n            align-items: center;\r\n            padding: 20rpx 0;\r\n            border-bottom: 1rpx solid rgba(52, 148, 230, 0.2);\r\n            margin-bottom: 20rpx;\r\n            transition: all 0.3s ease;\r\n\r\n            &:active {\r\n                background-color: rgba(52, 148, 230, 0.05);\r\n            }\r\n\r\n            image {\r\n                width: 32rpx;\r\n                height: 32rpx;\r\n                margin-right: 10rpx;\r\n            }\r\n\r\n            text {\r\n                font-size: 28rpx;\r\n                color: #333;\r\n            }\r\n\r\n            .placeholder {\r\n                color: #999;\r\n            }\r\n        }\r\n\r\n        .detail-info {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            flex-wrap: wrap;\r\n            padding: 30rpx 0;\r\n            width: 88%;\r\n            gap: 15rpx;\r\n            border-bottom: 1rpx solid rgba(52, 148, 230, 0.2);\r\n            background-color: rgba(255, 255, 255, 0.8);\r\n            border-radius: 15rpx;\r\n            padding: 20rpx;\r\n            margin-bottom: 20rpx;\r\n            box-shadow: 0 3rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\r\n            .info-item {\r\n                display: flex;\r\n                align-items: center;\r\n                margin-top: 15rpx;\r\n                background-color: rgba(52, 148, 230, 0.05);\r\n                padding: 10rpx 20rpx;\r\n                border-radius: 30rpx;\r\n                transition: all 0.3s ease;\r\n\r\n                &:active {\r\n                    transform: scale(0.95);\r\n                    background-color: rgba(52, 148, 230, 0.1);\r\n                }\r\n\r\n                .info-icon {\r\n                    width: 40rpx;\r\n                    height: 40rpx;\r\n                    margin-right: 10rpx;\r\n                }\r\n\r\n                .info-icon-content {\r\n                    border-bottom: 1rpx solid rgba(52, 148, 230, 0.3);\r\n                    width: 150rpx;\r\n                    padding: 0 15rpx;\r\n                    transition: all 0.3s ease;\r\n\r\n                    &:focus {\r\n                        border-bottom-color: #3494E6;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .note-content-input {\r\n            width: 88%;\r\n            font-size: 30rpx;\r\n            line-height: 1.8;\r\n            min-height: 300rpx;\r\n            padding: 20rpx;\r\n            margin-bottom: 20rpx;\r\n            background-color: rgba(255, 255, 255, 0.8);\r\n            border-radius: 15rpx;\r\n            box-shadow: 0 3rpx 10rpx rgba(0, 0, 0, 0.05);\r\n            border: 1rpx solid rgba(52, 148, 230, 0.2);\r\n\r\n            &-content {\r\n                width: 100%;\r\n                min-height: 200rpx;\r\n            }\r\n        }\r\n\r\n        .image-section {\r\n            padding: 20rpx 0;\r\n\r\n            .image-list {\r\n                display: flex;\r\n                flex-wrap: wrap;\r\n                gap: 20rpx;\r\n\r\n                .image-item {\r\n                    width: 210rpx;\r\n                    height: 210rpx;\r\n                    position: relative;\r\n                    border-radius: 15rpx;\r\n                    // overflow: hidden;\r\n                    box-shadow: 0 3rpx 10rpx rgba(0, 0, 0, 0.1);\r\n                    transition: all 0.3s ease;\r\n\r\n                    &:active {\r\n                        transform: scale(0.95);\r\n                    }\r\n\r\n                    .preview-image {\r\n                        width: 100%;\r\n                        height: 100%;\r\n                        border-radius: 8rpx;\r\n                    }\r\n\r\n                    .delete-btn {\r\n                        position: absolute;\r\n                        top: -10rpx;\r\n                        right: -10rpx;\r\n                        width: 40rpx;\r\n                        height: 40rpx;\r\n                        background: linear-gradient(135deg, #ff7676, #f54242);\r\n                        border-radius: 50%;\r\n                        display: flex;\r\n                        align-items: center;\r\n                        justify-content: center;\r\n                        box-shadow: 0 3rpx 8rpx rgba(0, 0, 0, 0.2);\r\n                        transition: all 0.3s ease;\r\n\r\n                        &:active {\r\n                            transform: scale(0.9);\r\n                        }\r\n\r\n                        image {\r\n                            width: 24rpx;\r\n                            height: 24rpx;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                .add-image-btn {\r\n                    width: 210rpx;\r\n                    height: 210rpx;\r\n                    border: 2rpx dashed rgba(52, 148, 230, 0.4);\r\n                    border-radius: 15rpx;\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    background-color: rgba(52, 148, 230, 0.05);\r\n                    transition: all 0.3s ease;\r\n\r\n                    &:active {\r\n                        background-color: rgba(52, 148, 230, 0.1);\r\n                        transform: scale(0.95);\r\n                    }\r\n\r\n                    text {\r\n                        font-size: 50rpx;\r\n                        color: #3494E6;\r\n                        line-height: 1;\r\n                        margin-bottom: 10rpx;\r\n                    }\r\n\r\n                    .add-text {\r\n                        font-size: 28rpx;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .video-section {\r\n            padding: 20rpx 0;\r\n            width: 210rpx;\r\n            height: 210rpx;\r\n\r\n            .video-container {\r\n                height: 100%;\r\n                position: relative;\r\n                margin-bottom: 20rpx;\r\n                border-radius: 15rpx;\r\n                // overflow: hidden;\r\n                box-shadow: 0 3rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\r\n                .preview-video {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    border-radius: 8rpx;\r\n                }\r\n\r\n                .delete-btn {\r\n                    position: absolute;\r\n                    top: -10rpx;\r\n                    right: -10rpx;\r\n                    width: 40rpx;\r\n                    height: 40rpx;\r\n                    background: linear-gradient(135deg, #ff7676, #f54242);\r\n                    border-radius: 50%;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    box-shadow: 0 3rpx 8rpx rgba(0, 0, 0, 0.2);\r\n                    transition: all 0.3s ease;\r\n\r\n                    &:active {\r\n                        transform: scale(0.9);\r\n                    }\r\n\r\n                    image {\r\n                        width: 24rpx;\r\n                        height: 24rpx;\r\n                    }\r\n                }\r\n            }\r\n\r\n            .video-cover-section {\r\n                padding: 20rpx 0;\r\n\r\n                .section-title {\r\n                    font-size: 32rpx;\r\n                    font-weight: bold;\r\n                    margin-bottom: 20rpx;\r\n                    background: linear-gradient(90deg, #3494E6, #3494E6);\r\n                    -webkit-background-clip: text;\r\n                    background-clip: text;\r\n                    color: transparent;\r\n                }\r\n\r\n                .cover-container {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 20rpx;\r\n\r\n                    .cover-preview-wrapper {\r\n                        position: relative;\r\n                        width: 210rpx;\r\n                        height: 210rpx;\r\n                        border-radius: 15rpx;\r\n                        // overflow: hidden;\r\n                        box-shadow: 0 3rpx 10rpx rgba(0, 0, 0, 0.1);\r\n                    }\r\n\r\n                    .cover-preview {\r\n                        width: 210rpx;\r\n                        height: 210rpx;\r\n                        border-radius: 8rpx;\r\n                    }\r\n\r\n                    .delete-btn {\r\n                        position: absolute;\r\n                        top: -10rpx;\r\n                        right: -10rpx;\r\n                        width: 40rpx;\r\n                        height: 40rpx;\r\n                        background: linear-gradient(135deg, #ff7676, #f54242);\r\n                        border-radius: 50%;\r\n                        display: flex;\r\n                        align-items: center;\r\n                        justify-content: center;\r\n                        box-shadow: 0 3rpx 8rpx rgba(0, 0, 0, 0.2);\r\n                        transition: all 0.3s ease;\r\n\r\n                        &:active {\r\n                            transform: scale(0.9);\r\n                        }\r\n\r\n                        image {\r\n                            width: 24rpx;\r\n                            height: 24rpx;\r\n                        }\r\n                    }\r\n\r\n                    .add-cover-btn {\r\n                        width: 210rpx;\r\n                        height: 210rpx;\r\n                        border: 2rpx dashed rgba(52, 148, 230, 0.4);\r\n                        border-radius: 15rpx;\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        align-items: center;\r\n                        justify-content: center;\r\n                        background-color: rgba(52, 148, 230, 0.05);\r\n                        transition: all 0.3s ease;\r\n\r\n                        &:active {\r\n                            background-color: rgba(52, 148, 230, 0.1);\r\n                            transform: scale(0.95);\r\n                        }\r\n\r\n                        text {\r\n                            font-size: 50rpx;\r\n                            color: #3494E6;\r\n                            line-height: 1;\r\n                            margin-bottom: 10rpx;\r\n                        }\r\n\r\n                        .add-text {\r\n                            font-size: 28rpx;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .add-video-btn {\r\n            width: 210rpx;\r\n            height: 210rpx;\r\n            border: 2rpx dashed rgba(52, 148, 230, 0.4);\r\n            border-radius: 15rpx;\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            justify-content: center;\r\n            background-color: rgba(52, 148, 230, 0.05);\r\n            transition: all 0.3s ease;\r\n\r\n            &:active {\r\n                background-color: rgba(52, 148, 230, 0.1);\r\n                transform: scale(0.95);\r\n            }\r\n\r\n            .add-icon {\r\n                font-size: 50rpx;\r\n                color: #3494E6;\r\n                line-height: 1;\r\n                margin-bottom: 10rpx;\r\n            }\r\n\r\n            .add-text {\r\n                font-size: 28rpx;\r\n            }\r\n        }\r\n\r\n        .detail-errors {\r\n            display: flex;\r\n            flex-direction: column;\r\n            margin: 0 0 16rpx 0;\r\n            width: 88%;\r\n        }\r\n\r\n        .error-text {\r\n            color: #EC6EAD;\r\n            font-size: 24rpx;\r\n            margin: 8rpx 0 8rpx 0;\r\n            background-color: rgba(236, 110, 173, 0.1);\r\n            padding: 8rpx 16rpx;\r\n            border-radius: 10rpx;\r\n            display: block;\r\n            width: fit-content;\r\n            max-width: 90%;\r\n            word-break: break-all;\r\n        }\r\n    }\r\n\r\n    .save-button {\r\n        position: fixed;\r\n        bottom: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100rpx;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        background: linear-gradient(to right, #3494E6, #EC6EAD);\r\n        color: #fff;\r\n        font-size: 32rpx;\r\n        font-weight: bold;\r\n        z-index: 10;\r\n        box-shadow: 0 -5rpx 15rpx rgba(52, 148, 230, 0.2);\r\n        transition: all 0.3s ease;\r\n\r\n        &:active {\r\n            transform: scale(0.98);\r\n            box-shadow: 0 -3rpx 10rpx rgba(52, 148, 230, 0.1);\r\n        }\r\n    }\r\n}\r\n</style>","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/notes/note-edit.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","validateTitle","validateContent","validateLocation","uni","uploadFiles","updateRelease","onLoad"],"mappings":"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"}