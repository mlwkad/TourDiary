{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"home-content\">\r\n\t\t<view class=\"home-input\">\r\n\t\t\t<image src=\"/static/public/search.png\" class=\"home-search-icon\"></image>\r\n\t\t\t<image src=\"/static/public/back.png\" class=\"home-back-icon\"></image>\r\n\t\t\t<input class=\"home-input-search\" placeholder=\"搜一搜\" v-model=\"searchContent\">\r\n\t\t\t<view class=\"home-input-go\" @click=\"goSearch\">搜索</view>\r\n\t\t</view>\r\n\t</view>\r\n\t<view class=\"home-choose\" v-if=\"isShowChoose\">\r\n\t\t<view class=\"home-user\" :style=\"{ backgroundColor: choose === false ? '#4bb0ff' : '#bebebf' }\"\r\n\t\t\t@click=\"choose = false, allInfo = allInfoByUserName\">\r\n\t\t\t用户</view>\r\n\t\t<view class=\"home-release\" :style=\"{ backgroundColor: choose === true ? '#4bb0ff' : '#bebebf' }\"\r\n\t\t\t@click=\"choose = true, allInfo = allInfoByTitle\">\r\n\t\t\t游记</view>\r\n\t</view>\r\n\t<view class=\"home-waterfall\">\r\n\t\t<view class=\"home-waterfall-box\" v-for=\"(i, index) in 2\" :key=\"index\">\r\n\t\t\t<view class=\"home-waterfall-content\" v-for=\"j in allInfo[i - 1]\" :key=\"j.name\" @click=\"goDetail(j)\">\r\n\t\t\t\t<!--优先填满宽度,同时保证高宽比例,高度>容器高度=溢出,可设置overflow隐藏,反之填不满-->\r\n\t\t\t\t<image class=\"waterfall-img\" src=\"/static/666.jpg\" mode=\"widthFix\"></image>\r\n\t\t\t\t<view class=\"waterfall-title\">{{ j.title }}</view>\r\n\t\t\t\t<view class=\"person-info\">\r\n\t\t\t\t\t<!--裁剪图片以保证图片完全填满容器,同时保证高宽比例,溢出就裁剪,填不满就放大-->\r\n\t\t\t\t\t<image class=\"waterfall-avatar\" src=\"/static/666.jpg\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"waterfall-name\">{{ j.userName }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n\t<image class=\"home-gotop\" v-if=\"goTop\" @click=\"goTopFunc\" src=\"/static/public/goTop.png\">回到顶部</image>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { getAllReleases, searchReleases } from '../../api/api'\r\nimport { onLoad, onReachBottom, onPageScroll, onShow } from '@dcloudio/uni-app'\r\nimport { ref, watch } from 'vue'\r\nlet searchContent = ref<string>('')\r\nlet goTop = ref<boolean>(false)\r\nlet choose = ref<boolean>(false)\r\nlet isShowChoose = ref<boolean>(false)\r\n\r\nconst allInfo = ref<any>([[], []])\r\nconst allInfoByUserName = ref<any>([[], []])\r\nconst allInfoByTitle = ref<any>([[], []])\r\n\r\nwatch(searchContent, (newVal) => {\r\n\tif (!newVal) {\r\n\t\tgetAllReleases(50, 0).then(res => {\r\n\t\t\tallInfo.value[0] = res.releases\r\n\t\t})\r\n\t\tgetAllReleases(50, 1).then(res => {\r\n\t\t\tallInfo.value[1] = res.releases\r\n\t\t})\r\n\t\tisShowChoose.value = false\r\n\t} else { }\r\n})\r\n\r\nconst goSearch = () => {\r\n\tif (!searchContent.value) return\r\n\tsearchReleases(\r\n\t\t{ userName: searchContent.value, title: searchContent.value }\r\n\t).then(res => {\r\n\t\tisShowChoose.value = true\r\n\t\tif (res.byUserName.length === 1) {\r\n\t\t\tallInfoByUserName.value[0] = res.byUserName\r\n\t\t} else {\r\n\t\t\tallInfoByUserName.value[0] = res.byUserName.slice(0, res.byUserName.length / 2)\r\n\t\t\tallInfoByUserName.value[1] = res.byUserName.slice(res.byUserName.length / 2, res.byUserName.length)\r\n\t\t}\r\n\t\tallInfo.value = allInfoByUserName.value\r\n\t\tif (res.byTitle.length === 1) {\r\n\t\t\tallInfoByTitle.value[0] = res.byTitle\r\n\t\t} else {\r\n\t\t\tallInfoByTitle.value[0] = res.byTitle.slice(0, res.byTitle.length / 2)\r\n\t\t\tallInfoByTitle.value[1] = res.byTitle.slice(res.byTitle.length / 2, res.byTitle.length)\r\n\t\t}\r\n\t})\r\n}\r\n\r\nconst goDetail = (info) => {\r\n\tuni.navigateTo({\r\n\t\turl: `/pages/detail/detail?info=${encodeURIComponent(JSON.stringify(info))}`\r\n\t})\r\n}\r\n\r\nconst goTopFunc = () => {\r\n\tuni.pageScrollTo({\r\n\t\tscrollTop: 0,\r\n\t\tduration: 300\r\n\t})\r\n}\r\n\r\n// onLoad(() => {\r\n// \tgetAllReleases(50, 0).then(res => {\r\n// \t\tallInfo.value[0] = res.releases\r\n// \t\tuni.__f__('log','at pages/index/index.vue:98',res)\r\n// \t})\r\n// \tgetAllReleases(50, 1).then(res => {\r\n// \t\tallInfo.value[1] = res.releases\r\n// \t\tuni.__f__('log','at pages/index/index.vue:102',res)\r\n// \t})\r\n// })\r\n\r\nonShow(() => {\r\n\tgetAllReleases(50, 0).then(res => {\r\n\t\tallInfo.value[0] = res.releases\r\n\t\t// uni.__f__('log','at pages/index/index.vue:109',res)\r\n\t})\r\n\tgetAllReleases(50, 1).then(res => {\r\n\t\tallInfo.value[1] = res.releases\r\n\t\t// uni.__f__('log','at pages/index/index.vue:113',res)\r\n\t})\r\n})\r\n\r\nonReachBottom(() => {\r\n\r\n})\r\n\r\nonPageScroll((e) => {\r\n\tif (e.scrollTop > 400) {\r\n\t\tgoTop.value = true\r\n\t} else {\r\n\t\tgoTop.value = false\r\n\t}\r\n})\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.home-content {\r\n\t// background: linear-gradient(to right, #4bb0ff, #61e4ff);\r\n\twidth: 100vw;\r\n\r\n\t.home-input {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tflex: 1;\r\n\t\tpadding: 15rpx 0;\r\n\t\tposition: relative;\r\n\r\n\t\t.home-back-icon {\r\n\t\t\twidth: 40rpx;\r\n\t\t\theight: 38rpx;\r\n\t\t\tpadding: 0 15rpx;\r\n\t\t}\r\n\r\n\t\t.home-search-icon {\r\n\t\t\twidth: 40rpx;\r\n\t\t\theight: 38rpx;\r\n\t\t\tmargin: 0 10rpx;\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 72rpx;\r\n\t\t}\r\n\r\n\r\n\t\t&-search {\r\n\t\t\twidth: 60%;\r\n\t\t\tbackground-color: rgba(128, 128, 128, 0.266);\r\n\t\t\tpadding: 10rpx;\r\n\t\t\tborder-radius: 24rpx;\r\n\t\t\tpadding: 8rpx 70rpx;\r\n\t\t\tcolor: black;\r\n\t\t}\r\n\r\n\t\t&-go {\r\n\t\t\twhite-space: nowrap;\r\n\t\t\tpadding: 0 20rpx\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.home-choose {\r\n\tdisplay: flex;\r\n\tpadding: 12rpx 12rpx 12rpx 22rpx;\r\n\tgap: 25rpx;\r\n\r\n\t.home-user {\r\n\t\tpadding: 12rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\t// background: linear-gradient(to right, #4bb0ff, #61e4ff);\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n\r\n\t.home-release {\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 12rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\t// background: linear-gradient(to right, #4bb0ff, #61e4ff);\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n}\r\n\r\n.home-waterfall {\r\n\tmargin: 0 auto;\r\n\twidth: 95%;\r\n\tdisplay: flex;\r\n\theight: 100%;\r\n\tgap: 25rpx;\r\n\r\n\t&-box {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 25rpx;\r\n\r\n\t\t.home-waterfall-content {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: fit-content;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t\tpadding-bottom: 12rpx;\r\n\t\t\tbox-shadow: 0 0 10rpx 0 rgba(0, 0, 0, 0.389);\r\n\r\n\t\t\t.waterfall-img {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tborder-radius: 12rpx 12rpx 0 0;\r\n\t\t\t}\r\n\r\n\t\t\t.waterfall-title {\r\n\t\t\t\tfont-weight: 550;\r\n\t\t\t\twhite-space: wrap;\r\n\t\t\t\tcolor: rgb(62, 62, 62);\r\n\t\t\t\tpadding: 1rpx 15rpx 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.person-info {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\tgap: 25rpx;\r\n\t\t\t\tpadding-left: 15rpx;\r\n\t\t\t\tpadding-bottom: 5rpx;\r\n\r\n\t\t\t\t.waterfall-avatar {\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\twidth: 50rpx;\r\n\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.waterfall-name {\r\n\t\t\t\t\tcolor: rgba(83, 83, 83, 0.718);\r\n\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.home-gotop {\r\n\tposition: fixed;\r\n\tbottom: 20rpx;\r\n\tright: 25rpx;\r\n\twidth: 100rpx;\r\n\theight: 100rpx;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","watch","getAllReleases","searchReleases","uni","onShow","onReachBottom","onPageScroll"],"mappings":";;;;;;;AAsCA,QAAA,gBAAAA,kBAAA,EAAA;AACA,QAAA,QAAAA,kBAAA,KAAA;AACA,QAAA,SAAAA,kBAAA,KAAA;AACA,QAAA,eAAAA,kBAAA,KAAA;AAEA,UAAA,UAAAA,cAAA,IAAA,CAAA,CAAA,GAAA,CAAA,CAAA,CAAA;AACA,UAAA,oBAAAA,cAAA,IAAA,CAAA,CAAA,GAAA,CAAA,CAAA,CAAA;AACA,UAAA,iBAAAA,cAAA,IAAA,CAAA,CAAA,GAAA,CAAA,CAAA,CAAA;AAEAC,wBAAA,eAAA,CAAA,WAAA;AACC,UAAA,CAAA,QAAA;AACCC,gBAAAA,eAAA,IAAA,CAAA,EAAA,KAAA,CAAA,QAAA;AACC,kBAAA,MAAA,CAAA,IAAA,IAAA;AAAA,QAAuB,CAAA;AAExBA,gBAAAA,eAAA,IAAA,CAAA,EAAA,KAAA,CAAA,QAAA;AACC,kBAAA,MAAA,CAAA,IAAA,IAAA;AAAA,QAAuB,CAAA;AAExB,qBAAA,QAAA;AAAA,MACM;AAAA,IAAE,CAAA;AAGV,UAAA,WAAA,MAAA;AACC,UAAA,CAAA,cAAA;AAA0B;AAC1BC,cAAA;AAAA,QAAA,EAAA,UAAA,cAAA,OAAA,OAAA,cAAA,MAAA;AAAA,MAC6D,EAAA,KAAA,CAAA,QAAA;AAE5D,qBAAA,QAAA;AACA,YAAA,IAAA,WAAA,WAAA,GAAA;AACC,4BAAA,MAAA,CAAA,IAAA,IAAA;AAAA,QAAiC,OAAA;AAEjC,4BAAA,MAAA,CAAA,IAAA,IAAA,WAAA,MAAA,GAAA,IAAA,WAAA,SAAA,CAAA;AACA,4BAAA,MAAA,CAAA,IAAA,IAAA,WAAA,MAAA,IAAA,WAAA,SAAA,GAAA,IAAA,WAAA,MAAA;AAAA,QAAkG;AAEnG,gBAAA,QAAA,kBAAA;AACA,YAAA,IAAA,QAAA,WAAA,GAAA;AACC,yBAAA,MAAA,CAAA,IAAA,IAAA;AAAA,QAA8B,OAAA;AAE9B,yBAAA,MAAA,CAAA,IAAA,IAAA,QAAA,MAAA,GAAA,IAAA,QAAA,SAAA,CAAA;AACA,yBAAA,MAAA,CAAA,IAAA,IAAA,QAAA,MAAA,IAAA,QAAA,SAAA,GAAA,IAAA,QAAA,MAAA;AAAA,QAAsF;AAAA,MACvF,CAAA;AAAA,IACA;AAGF,UAAA,WAAA,CAAA,SAAA;AACCC,oBAAAA,MAAA,WAAA;AAAA,QAAe,KAAA,6BAAA,mBAAA,KAAA,UAAA,IAAA,CAAA,CAAA;AAAA,MAC4D,CAAA;AAAA,IAC1E;AAGF,UAAA,YAAA,MAAA;AACCA,oBAAAA,MAAA,aAAA;AAAA,QAAiB,WAAA;AAAA,QACL,UAAA;AAAA,MACD,CAAA;AAAA,IACV;AAcFC,kBAAAA,OAAA,MAAA;AACCH,cAAAA,eAAA,IAAA,CAAA,EAAA,KAAA,CAAA,QAAA;AACC,gBAAA,MAAA,CAAA,IAAA,IAAA;AAAA,MAAuB,CAAA;AAGxBA,cAAAA,eAAA,IAAA,CAAA,EAAA,KAAA,CAAA,QAAA;AACC,gBAAA,MAAA,CAAA,IAAA,IAAA;AAAA,MAAuB,CAAA;AAAA,IAEvB,CAAA;AAGFI,kBAAAA,cAAA,MAAA;AAAA,IAAoB,CAAA;AAIpBC,kBAAA,aAAA,CAAA,MAAA;AACC,UAAA,EAAA,YAAA,KAAA;AACC,cAAA,QAAA;AAAA,MAAc,OAAA;AAEd,cAAA,QAAA;AAAA,MAAc;AAAA,IACf,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5HD,GAAG,WAAW,eAAe;"}