{"version":3,"file":"list.js","sources":["pages/follow/list.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZm9sbG93L2xpc3QudnVl"],"sourcesContent":["<template>\r\n    <view class=\"follow-container\">\r\n        <!-- 内容区域 -->\r\n        <scroll-view scroll-y class=\"content-area\" refresher-enabled @refresherrefresh=\"onRefresh\"\r\n            :refresher-triggered=\"isRefreshing\">\r\n            <template v-if=\"followList.length > 0\">\r\n                <view class=\"follow-list\">\r\n                    <view class=\"follow-item\" v-for=\"(item, index) in followList\" :key=\"index\"\r\n                        @click=\"viewUserProfile(item.userID)\">\r\n                        <image class=\"user-avatar\" src=\"/static/666.jpg\" mode=\"aspectFill\"></image>\r\n                        <view class=\"user-info\">\r\n                            <view class=\"user-name\">{{ item.userName }}</view>\r\n                            <view class=\"works-count\">作品数: {{ item.worksCount || 0 }}</view>\r\n                        </view>\r\n                        <view class=\"follow-action\">\r\n                            <view class=\"follow-btn\" @click.stop=\"unfollowUser(item.userID, index)\">取消关注</view>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n\r\n                <!-- 底部提示 -->\r\n                <view class=\"list-footer\" v-if=\"followList.length > 5\">\r\n                    <text>已经到底啦~</text>\r\n                </view>\r\n            </template>\r\n            <template v-else>\r\n                <view class=\"empty-state\">\r\n                    <image class=\"empty-icon\" src=\"/static/public/search.png\" mode=\"aspectFit\"></image>\r\n                    <view class=\"empty-text\">暂无关注用户</view>\r\n                    <view class=\"empty-action\" @click=\"goToDiscover\">去发现更多创作者</view>\r\n                </view>\r\n            </template>\r\n        </scroll-view>\r\n    </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue';\r\nimport { onLoad, onShow } from '@dcloudio/uni-app'\r\nimport { getFollowingList, getUserInfo, unfollow } from '@/api/api'\r\n// 关注列表数据\r\nconst followList = ref<any[]>([])\r\nconst isRefreshing = ref(false)\r\nconst userID = ref<string>('')\r\n\r\n// 查看用户主页\r\nconst viewUserProfile = (userID: string) => {\r\n    uni.navigateTo({\r\n        url: `/pages/follow/works?userID=${userID}`\r\n    })\r\n}\r\n\r\n// 取消关注\r\nconst unfollowUser = (targetUserID: string, index: number) => {\r\n    uni.showModal({\r\n        title: '提示',\r\n        content: '确定要取消关注该用户吗？',\r\n        success: (res) => {\r\n            if (res.confirm) {\r\n                unfollow(userID.value, targetUserID).then(res => {\r\n                    followList.value.splice(index, 1)\r\n                    uni.showToast({\r\n                        title: '已取消关注',\r\n                        icon: 'success'\r\n                    })\r\n                }).catch(err => {\r\n                    uni.__f__('log','at pages/follow/list.vue:67',err)\r\n                })\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n// 刷新数据\r\nconst onRefresh = async () => {\r\n    isRefreshing.value = true\r\n    // 模拟获取关注列表的API调用\r\n    await new Promise((resolve) => {\r\n        setTimeout(() => {\r\n            isRefreshing.value = false\r\n            resolve(null)\r\n        }, 500);\r\n    })\r\n}\r\n\r\n// 去发现页面\r\nconst goToDiscover = () => {\r\n    uni.switchTab({\r\n        url: '/pages/index/index'\r\n    })\r\n}\r\n\r\nonShow(() => {\r\n    const userInfo = uni.getStorageSync('userInfo')\r\n    followList.value = []\r\n    if (userInfo) {\r\n        userID.value = JSON.parse(userInfo).userId\r\n        // 这里应该获取关注列表\r\n        getFollowingList(userID.value).then(res => {\r\n            res.forEach(item => {\r\n                getUserInfo(item).then(res => {\r\n                    const user = {\r\n                        userID: res.userID,\r\n                        userName: res.userName,\r\n                        worksCount: JSON.parse(res.release).length,\r\n                        avatar: res.avatar\r\n                    }\r\n                    followList.value.push(user)\r\n                })\r\n            })\r\n        })\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.follow-container {\r\n    width: 100%;\r\n    min-height: 100vh;\r\n    background: linear-gradient(to bottom, #f0f5ff, #ffffff);\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: relative;\r\n    padding-bottom: 30rpx;\r\n\r\n    &::before {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        height: 400rpx;\r\n        background: linear-gradient(135deg, rgba(52, 148, 230, 0.15), rgba(236, 110, 173, 0.1));\r\n        z-index: -1;\r\n        border-radius: 0 0 30% 30%;\r\n    }\r\n\r\n    &::after {\r\n        content: '';\r\n        position: absolute;\r\n        top: 20%;\r\n        right: 10%;\r\n        width: 100rpx;\r\n        height: 100rpx;\r\n        border-radius: 50%;\r\n        background: linear-gradient(135deg, rgba(236, 110, 173, 0.2), rgba(52, 148, 230, 0.1));\r\n        filter: blur(30rpx);\r\n        z-index: -1;\r\n    }\r\n\r\n    .page-header {\r\n        padding: 30rpx;\r\n        margin-bottom: 10rpx;\r\n\r\n        .page-title {\r\n            font-size: 44rpx;\r\n            font-weight: bold;\r\n            background: linear-gradient(90deg, #3494E6, #EC6EAD);\r\n            -webkit-background-clip: text;\r\n            background-clip: text;\r\n            color: transparent;\r\n            text-shadow: 1rpx 1rpx 2rpx rgba(0, 0, 0, 0.1);\r\n        }\r\n    }\r\n\r\n    .content-area {\r\n        flex: 1;\r\n        padding: 10rpx 20rpx 20rpx;\r\n        min-height: fit-content;\r\n        width: 95%;\r\n        margin: 0 auto;\r\n\r\n        .follow-list {\r\n            .follow-item {\r\n                width: 91%;\r\n                background-color: rgba(255, 255, 255, 0.9);\r\n                border-radius: 20rpx;\r\n                margin-bottom: 30rpx;\r\n                padding: 25rpx;\r\n                display: flex;\r\n                align-items: center;\r\n                box-shadow: 0 0 15rpx 0 rgba(0, 0, 0, 0.1);\r\n                backdrop-filter: none;\r\n                border: 1px solid rgba(255, 255, 255, 0.6);\r\n                transition: all 0.3s ease;\r\n                position: relative;\r\n                overflow: hidden;\r\n\r\n                &::before {\r\n                    content: '';\r\n                    position: absolute;\r\n                    top: 0;\r\n                    left: 0;\r\n                    width: 6rpx;\r\n                    height: 100%;\r\n                    background: linear-gradient(to bottom, #3494E6, #EC6EAD);\r\n                    opacity: 0.7;\r\n                }\r\n\r\n                .user-avatar {\r\n                    width: 100rpx;\r\n                    height: 100rpx;\r\n                    border-radius: 50%;\r\n                    margin-right: 25rpx;\r\n                    box-shadow: 0 5rpx 10rpx rgba(0, 0, 0, 0.1);\r\n                    border: 3rpx solid #fff;\r\n                }\r\n\r\n                .user-info {\r\n                    flex: 1;\r\n                    display: flex;\r\n                    flex-direction: column;\r\n\r\n                    .user-name {\r\n                        font-size: 32rpx;\r\n                        font-weight: bold;\r\n                        margin-bottom: 8rpx;\r\n                        background: linear-gradient(90deg, #3494E6, #555);\r\n                        -webkit-background-clip: text;\r\n                        background-clip: text;\r\n                        color: transparent;\r\n                    }\r\n\r\n                    .works-count {\r\n                        font-size: 26rpx;\r\n                        color: #666;\r\n                        background-color: rgba(52, 148, 230, 0.1);\r\n                        padding: 4rpx 16rpx;\r\n                        border-radius: 20rpx;\r\n                        display: inline-block;\r\n                        width: fit-content;\r\n                    }\r\n                }\r\n\r\n                .follow-action {\r\n                    .follow-btn {\r\n                        padding: 10rpx 20rpx;\r\n                        border-radius: 30rpx;\r\n                        font-size: 26rpx;\r\n                        color: #fff;\r\n                        background: linear-gradient(135deg, #ff7676, #f54242);\r\n                        box-shadow: 0 3rpx 8rpx rgba(0, 0, 0, 0.1);\r\n                        transition: all 0.3s ease;\r\n\r\n                        &:active {\r\n                            transform: scale(0.95);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .list-footer {\r\n            text-align: center;\r\n            padding: 30rpx 0;\r\n            color: #999;\r\n            font-size: 24rpx;\r\n        }\r\n\r\n        .empty-state {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            justify-content: center;\r\n            padding: 150rpx 0;\r\n\r\n            .empty-icon {\r\n                width: 250rpx;\r\n                height: 250rpx;\r\n                margin-bottom: 40rpx;\r\n                opacity: 0.6;\r\n                animation: float 3s ease-in-out infinite;\r\n            }\r\n\r\n            .empty-text {\r\n                font-size: 36rpx;\r\n                color: #999;\r\n                margin-bottom: 40rpx;\r\n                text-shadow: 1rpx 1rpx 2rpx rgba(0, 0, 0, 0.1);\r\n            }\r\n\r\n            .empty-action {\r\n                font-size: 30rpx;\r\n                color: #fff;\r\n                padding: 25rpx 50rpx;\r\n                background: linear-gradient(to right, #3494E6, #EC6EAD);\r\n                border-radius: 50rpx;\r\n                box-shadow: 0 8rpx 15rpx rgba(52, 148, 230, 0.3);\r\n                transition: all 0.3s ease;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@keyframes float {\r\n    0% {\r\n        transform: translateY(0);\r\n    }\r\n\r\n    50% {\r\n        transform: translateY(-10rpx);\r\n    }\r\n\r\n    100% {\r\n        transform: translateY(0);\r\n    }\r\n}\r\n</style>","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/follow/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","userID","uni","unfollow","res","onShow","getFollowingList","getUserInfo"],"mappings":";;;;;;;AAyCM,UAAA,aAAaA,kBAAW,CAAA,CAAE;AAC1B,UAAA,eAAeA,kBAAI,KAAK;AACxB,UAAA,SAASA,kBAAY,EAAE;AAGvB,UAAA,kBAAkB,CAACC,YAAmB;AACxCC,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK,8BAA8BD,OAAM;AAAA,MAAA,CAC5C;AAAA,IAAA;AAIC,UAAA,eAAe,CAAC,cAAsB,UAAkB;AAC1DC,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACd,cAAI,IAAI,SAAS;AACbC,oBAAA,SAAS,OAAO,OAAO,YAAY,EAAE,KAAK,CAAAC,SAAO;AAClC,yBAAA,MAAM,OAAO,OAAO,CAAC;AAChCF,4BAAAA,MAAI,UAAU;AAAA,gBACV,OAAO;AAAA,gBACP,MAAM;AAAA,cAAA,CACT;AAAA,YAAA,CACJ,EAAE,MAAM,CAAO,QAAA;AACRA,4BAAAA,MAAA,MAAM,OAAM,+BAA8B,GAAG;AAAA,YAAA,CACpD;AAAA,UACL;AAAA,QACJ;AAAA,MAAA,CACH;AAAA,IAAA;AAIL,UAAM,YAAY,YAAY;AAC1B,mBAAa,QAAQ;AAEf,YAAA,IAAI,QAAQ,CAAC,YAAY;AAC3B,mBAAW,MAAM;AACb,uBAAa,QAAQ;AACrB,kBAAQ,IAAI;AAAA,WACb,GAAG;AAAA,MAAA,CACT;AAAA,IAAA;AAIL,UAAM,eAAe,MAAM;AACvBA,oBAAAA,MAAI,UAAU;AAAA,QACV,KAAK;AAAA,MAAA,CACR;AAAA,IAAA;AAGLG,kBAAAA,OAAO,MAAM;AACH,YAAA,WAAWH,cAAAA,MAAI,eAAe,UAAU;AAC9C,iBAAW,QAAQ;AACnB,UAAI,UAAU;AACV,eAAO,QAAQ,KAAK,MAAM,QAAQ,EAAE;AAEpCI,gBAAAA,iBAAiB,OAAO,KAAK,EAAE,KAAK,CAAO,QAAA;AACvC,cAAI,QAAQ,CAAQ,SAAA;AAChBC,oBAAAA,YAAY,IAAI,EAAE,KAAK,CAAAH,SAAO;AAC1B,oBAAM,OAAO;AAAA,gBACT,QAAQA,KAAI;AAAA,gBACZ,UAAUA,KAAI;AAAA,gBACd,YAAY,KAAK,MAAMA,KAAI,OAAO,EAAE;AAAA,gBACpC,QAAQA,KAAI;AAAA,cAAA;AAEL,yBAAA,MAAM,KAAK,IAAI;AAAA,YAAA,CAC7B;AAAA,UAAA,CACJ;AAAA,QAAA,CACJ;AAAA,MACL;AAAA,IAAA,CACH;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/GD,GAAG,WAAW,eAAe;"}