{"version":3,"file":"collection.js","sources":["pages/collection/collection.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29sbGVjdGlvbi9jb2xsZWN0aW9uLnZ1ZQ"],"sourcesContent":["<template>\n    <view class=\"collection-container\">\n        <!-- 内容区域 -->\n        <scroll-view scroll-y class=\"content-area\" refresher-enabled @refresherrefresh=\"onRefresh\"\n            :refresher-triggered=\"isRefreshing\">\n            <template v-if=\"collections.length > 0\">\n                <view class=\"collection-list\">\n                    <view class=\"collection-item\" v-for=\"(item, index) in collections\" :key=\"index\"\n                        @click=\"viewNote(item.releaseID)\">\n                        <image class=\"item-image\" src=\"/static/666.jpg\" mode=\"aspectFill\"></image>\n                        <view class=\"item-content\">\n                            <view class=\"item-title\">{{ item.title }}</view>\n                            <view class=\"item-desc\">{{ item.content }}</view>\n                            <view class=\"item-meta\">\n                                <view class=\"item-date\">{{ item.createdAt }}</view>\n                                <view class=\"item-actions\">\n                                    <image class=\"action-icon\" src=\"/static/public/close.png\"\n                                        @click.stop=\"removeCollection(item.releaseID)\"></image>\n                                </view>\n                            </view>\n                        </view>\n                    </view>\n                </view>\n            </template>\n            <template v-else>\n                <view class=\"empty-state\">\n                    <image class=\"empty-icon\" src=\"/static/public/search.png\" mode=\"aspectFit\"></image>\n                    <view class=\"empty-text\">暂无收藏内容</view>\n                    <view class=\"empty-action\" @click=\"goToDiscover\">去发现更多内容</view>\n                </view>\n            </template>\n        </scroll-view>\n    </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport { getUserLiked, getReleaseDetail, removeLiked } from '../../api/api';\nimport { onLoad } from '@dcloudio/uni-app'\n\n// 收藏数据\nconst collections = ref<any[]>([])\nconst isRefreshing = ref(false)\nlet userID = ref<string>('')\n\n// 查看详情\nconst viewNote = async (releaseID: string) => {\n    const info = await getReleaseDetail(releaseID)\n    uni.navigateTo({\n        url: `/pages/detail/detail?info=${encodeURIComponent(JSON.stringify(info))}`\n    })\n}\n\n// 移除收藏\nconst removeCollection = (releaseID) => {\n    uni.showModal({\n        title: '提示',\n        content: '确定要移除这个收藏吗？',\n        success: async (res) => {\n            if (res.confirm) {\n                await removeLiked(userID, releaseID)\n                const res = await getUserLiked(userID)\n                collections.value = res\n                uni.showToast({\n                    title: '已移除收藏',\n                    icon: 'success'\n                })\n            }\n        }\n    });\n};\n\n// 刷新数据\nconst onRefresh = async () => {\n    isRefreshing.value = true\n    await getUserLiked(userID).then(res => { collections.value = res })\n    await new Promise((resolve) => {\n        setTimeout(() => {\n            isRefreshing.value = false\n            resolve()\n        }, 500);\n    })\n}\n\n// 去发现页面\nconst goToDiscover = () => {\n    uni.switchTab({\n        url: '/pages/index/index'\n    })\n}\n\nonLoad(() => {\n    userID = JSON.parse(uni.getStorageSync('userInfo')).userId\n    getUserLiked(userID).then(res => { collections.value = res })\n})\n\n</script>\n\n<style lang=\"scss\" scoped>\n.collection-container {\n    width: 100%;\n    min-height: 100vh;\n    background-color: #f8f8f8;\n    display: flex;\n    flex-direction: column;\n\n    .content-area {\n        flex: 1;\n        padding: 20rpx;\n        min-height: fit-content;\n        width: 93%;\n\n        .collection-list {\n            .collection-item {\n                background-color: #fff;\n                border-radius: 12rpx;\n                margin-bottom: 20rpx;\n                padding: 20rpx;\n                display: flex;\n                box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n\n                .item-image {\n                    width: 200rpx;\n                    height: 150rpx;\n                    border-radius: 8rpx;\n                    margin-right: 20rpx;\n                }\n\n                .item-content {\n                    flex: 1;\n                    display: flex;\n                    flex-direction: column;\n\n                    .item-title {\n                        font-size: 32rpx;\n                        font-weight: bold;\n                        color: #333;\n                        margin-bottom: 10rpx;\n                    }\n\n                    .item-desc {\n                        font-size: 26rpx;\n                        color: #666;\n                        margin-bottom: 15rpx;\n                        display: -webkit-box;\n                        -webkit-line-clamp: 2;\n                        -webkit-box-orient: vertical;\n                        overflow: hidden;\n                    }\n\n                    .item-meta {\n                        display: flex;\n                        justify-content: space-between;\n                        align-items: center;\n\n                        .item-date {\n                            font-size: 24rpx;\n                            color: #999;\n                        }\n\n                        .item-actions {\n                            display: flex;\n                            gap: 15rpx;\n\n                            .action-icon {\n                                width: 36rpx;\n                                height: 36rpx;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        .empty-state {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            padding: 100rpx 0;\n\n            .empty-icon {\n                width: 200rpx;\n                height: 200rpx;\n                margin-bottom: 30rpx;\n                opacity: 0.5;\n            }\n\n            .empty-text {\n                font-size: 32rpx;\n                color: #999;\n                margin-bottom: 30rpx;\n            }\n\n            .empty-action {\n                font-size: 28rpx;\n                color: #4bb0ff;\n                padding: 20rpx 40rpx;\n                background-color: rgba(75, 176, 255, 0.1);\n                border-radius: 30rpx;\n            }\n        }\n    }\n}\n</style>","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/collection/collection.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getReleaseDetail","uni","removeLiked","res","getUserLiked","onLoad"],"mappings":";;;;;;;AAyCM,UAAA,cAAcA,kBAAW,CAAA,CAAE;AAC3B,UAAA,eAAeA,kBAAI,KAAK;AAC1B,QAAA,SAASA,kBAAY,EAAE;AAGrB,UAAA,WAAW,OAAO,cAAsB;AACpC,YAAA,OAAO,MAAMC,yBAAiB,SAAS;AAC7CC,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK,6BAA6B,mBAAmB,KAAK,UAAU,IAAI,CAAC,CAAC;AAAA,MAAA,CAC7E;AAAA,IAAA;AAIC,UAAA,mBAAmB,CAAC,cAAc;AACpCA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,SAAS;AACP,kBAAAC,QAAA,YAAY,QAAQ,SAAS;AAC7BC,kBAAAA,OAAM,MAAMC,qBAAa,MAAM;AACrC,wBAAY,QAAQD;AACpBF,0BAAAA,MAAI,UAAU;AAAA,cACV,OAAO;AAAA,cACP,MAAM;AAAA,YAAA,CACT;AAAA,UACL;AAAA,QACJ;AAAA,MAAA,CACH;AAAA,IAAA;AAIL,UAAM,YAAY,YAAY;AAC1B,mBAAa,QAAQ;AACrB,YAAMG,QAAa,aAAA,MAAM,EAAE,KAAK,CAAO,QAAA;AAAE,oBAAY,QAAQ;AAAA,MAAA,CAAK;AAC5D,YAAA,IAAI,QAAQ,CAAC,YAAY;AAC3B,mBAAW,MAAM;AACb,uBAAa,QAAQ;AACb;WACT,GAAG;AAAA,MAAA,CACT;AAAA,IAAA;AAIL,UAAM,eAAe,MAAM;AACvBH,oBAAAA,MAAI,UAAU;AAAA,QACV,KAAK;AAAA,MAAA,CACR;AAAA,IAAA;AAGLI,kBAAAA,OAAO,MAAM;AACT,eAAS,KAAK,MAAMJ,cAAAA,MAAI,eAAe,UAAU,CAAC,EAAE;AACvCG,cAAAA,aAAA,MAAM,EAAE,KAAK,CAAO,QAAA;AAAE,oBAAY,QAAQ;AAAA,MAAA,CAAK;AAAA,IAAA,CAC/D;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7FD,GAAG,WAAW,eAAe;"}