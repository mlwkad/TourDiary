{"version":3,"file":"collection.js","sources":["pages/collection/collection.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29sbGVjdGlvbi9jb2xsZWN0aW9uLnZ1ZQ"],"sourcesContent":["<template>\n    <view class=\"collection-container\">\n\n        <!-- 内容区域 -->\n        <scroll-view scroll-y class=\"content-area\" refresher-enabled @refresherrefresh=\"onRefresh\"\n            :refresher-triggered=\"isRefreshing\">\n            <template v-if=\"collections.length > 0\">\n                <view class=\"collection-list\">\n                    <view class=\"collection-item\" v-for=\"(item, index) in collections\" :key=\"index\"\n                        @click=\"viewNote(item.releaseID)\">\n                        <image class=\"item-image\" src=\"/static/666.jpg\" mode=\"aspectFill\"></image>\n                        <view class=\"item-content\">\n                            <view class=\"item-title\">{{ item.title }}</view>\n                            <view class=\"item-desc\">{{ item.content }}</view>\n                            <view class=\"item-meta\">\n                                <view class=\"item-date\">\n                                    <image class=\"date-icon\" src=\"/static/public/time.png\"></image>\n                                    {{ item.createdAt.slice(0, 10) }}\n                                </view>\n                                <view class=\"item-actions\">\n                                    <view class=\"action-icon\" @click.stop=\"removeCollection(item.releaseID)\">删除</view>\n                                </view>\n                            </view>\n                        </view>\n                    </view>\n                </view>\n\n                <!-- 底部提示 -->\n                <view class=\"list-footer\" v-if=\"collections.length > 5\">\n                    <text>已经到底啦~</text>\n                </view>\n            </template>\n            <template v-else>\n                <view class=\"empty-state\">\n                    <image class=\"empty-icon\" src=\"/static/public/search.png\" mode=\"aspectFit\"></image>\n                    <view class=\"empty-text\">暂无收藏内容</view>\n                    <view class=\"empty-subtext\">收藏喜欢的旅游日记，随时查看</view>\n                    <view class=\"empty-action\" @click=\"goToDiscover\">去发现更多内容</view>\n                </view>\n            </template>\n        </scroll-view>\n    </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport { getUserLiked, getReleaseDetail, removeLiked } from '../../api/api';\nimport { onLoad } from '@dcloudio/uni-app'\n\n// 收藏数据\nconst collections = ref<any[]>([])\nconst isRefreshing = ref(false)\nlet userID = ref<string>('')\n\n// 查看详情\nconst viewNote = async (releaseID: string) => {\n    const info = await getReleaseDetail(releaseID)\n    uni.navigateTo({\n        url: `/pages/detail/detail?info=${encodeURIComponent(JSON.stringify(info))}`\n    })\n}\n\n// 移除收藏\nconst removeCollection = (releaseID) => {\n    uni.showModal({\n        title: '提示',\n        content: '确定要移除这个收藏吗？',\n        success: async (res) => {\n            if (res.confirm) {\n                await removeLiked(userID, releaseID)\n                const res = await getUserLiked(userID)\n                collections.value = res\n                uni.showToast({\n                    title: '已移除收藏',\n                    icon: 'success'\n                })\n            }\n        }\n    });\n};\n\n// 刷新数据\nconst onRefresh = async () => {\n    isRefreshing.value = true\n    await getUserLiked(userID).then(res => { collections.value = res })\n    await new Promise((resolve) => {\n        setTimeout(() => {\n            isRefreshing.value = false\n            resolve()\n        }, 500);\n    })\n}\n\n// 去发现页面\nconst goToDiscover = () => {\n    uni.switchTab({\n        url: '/pages/index/index'\n    })\n}\n\nonLoad(() => {\n    userID = JSON.parse(uni.getStorageSync('userInfo')).userId\n    getUserLiked(userID).then(res => { collections.value = res })\n})\n\n</script>\n\n<style lang=\"scss\" scoped>\n.collection-container {\n    width: 100%;\n    min-height: 100vh;\n    background: linear-gradient(to bottom, #f0f5ff, #ffffff);\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    padding-bottom: 30rpx;\n\n    &::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 400rpx;\n        background: linear-gradient(135deg, rgba(52, 148, 230, 0.15), rgba(236, 110, 173, 0.1));\n        z-index: -1;\n        border-radius: 0 0 30% 30%;\n    }\n\n    &::after {\n        content: '';\n        position: absolute;\n        top: 20%;\n        right: 10%;\n        width: 100rpx;\n        height: 100rpx;\n        border-radius: 50%;\n        background: linear-gradient(135deg, rgba(236, 110, 173, 0.2), rgba(52, 148, 230, 0.1));\n        filter: blur(30rpx);\n        z-index: -1;\n    }\n\n    .page-header {\n        padding: 30rpx;\n        margin-bottom: 10rpx;\n\n        .page-title {\n            font-size: 44rpx;\n            font-weight: bold;\n            background: linear-gradient(90deg, #3494E6, #EC6EAD);\n            -webkit-background-clip: text;\n            background-clip: text;\n            color: transparent;\n            text-shadow: 1rpx 1rpx 2rpx rgba(0, 0, 0, 0.1);\n        }\n    }\n\n    .content-area {\n        flex: 1;\n        padding: 10rpx 20rpx 20rpx;\n        min-height: fit-content;\n        width: 95%;\n        margin: 0 auto;\n\n        .collection-list {\n            .collection-item {\n                width: 91%;\n                background-color: rgba(255, 255, 255, 0.9);\n                border-radius: 20rpx;\n                margin-bottom: 30rpx;\n                padding: 25rpx;\n                display: flex;\n                box-shadow: 0 0 15rpx 0 rgba(0, 0, 0, 0.1);\n                backdrop-filter: none;\n                border: 1px solid rgba(255, 255, 255, 0.6);\n                transition: all 0.3s ease;\n                position: relative;\n                overflow: hidden;\n\n                &::before {\n                    content: '';\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 6rpx;\n                    height: 100%;\n                    background: linear-gradient(to bottom, #3494E6, #EC6EAD);\n                    opacity: 0.7;\n                }\n\n                .item-image {\n                    width: 200rpx;\n                    height: 150rpx;\n                    border-radius: 15rpx;\n                    margin-right: 25rpx;\n                    box-shadow: 0 5rpx 10rpx rgba(0, 0, 0, 0.1);\n                    transition: all 0.3s ease;\n                }\n\n                .item-content {\n                    flex: 1;\n                    display: flex;\n                    flex-direction: column;\n\n                    .item-title {\n                        font-size: 32rpx;\n                        font-weight: bold;\n                        margin-bottom: 12rpx;\n                        background: linear-gradient(90deg, #3494E6, #555);\n                        -webkit-background-clip: text;\n                        background-clip: text;\n                        color: transparent;\n                        text-shadow: 0 0 1px rgba(52, 148, 230, 0.1);\n                        position: relative;\n                        padding-bottom: 10rpx;\n\n                        &::after {\n                            content: '';\n                            position: absolute;\n                            bottom: 0;\n                            left: 0;\n                            width: 60rpx;\n                            height: 3rpx;\n                            background: linear-gradient(90deg, #3494E6, transparent);\n                        }\n                    }\n\n                    .item-desc {\n                        width: 95%;\n                        font-size: 26rpx;\n                        color: #333;\n                        margin-bottom: 20rpx;\n                        display: -webkit-box;\n                        -webkit-line-clamp: 2;\n                        line-clamp: 2;\n                        -webkit-box-orient: vertical;\n                        text-overflow: ellipsis;\n                        overflow: hidden;\n                        line-height: 1.6;\n                        background: linear-gradient(90deg, rgba(52, 148, 230, 0.15), rgba(236, 110, 173, 0.05));\n                        padding: 5rpx 15rpx;\n                        border-radius: 10rpx;\n                        border-left: 3rpx solid rgba(52, 148, 230, 0.6);\n                        text-shadow: 0 0 1px rgba(255, 255, 255, 0.8);\n                    }\n\n                    .item-meta {\n                        display: flex;\n                        justify-content: space-between;\n                        align-items: center;\n\n                        .item-date {\n                            font-size: 24rpx;\n                            color: #888;\n                            display: flex;\n                            align-items: center;\n                            background-color: rgba(0, 0, 0, 0.05);\n                            padding: 6rpx 16rpx;\n                            border-radius: 20rpx;\n\n                            .date-icon {\n                                width: 24rpx;\n                                height: 24rpx;\n                                margin-right: 8rpx;\n                            }\n                        }\n\n                        .item-actions {\n                            display: flex;\n                            gap: 15rpx;\n\n                            .action-icon {\n                                padding: 10rpx 20rpx;\n                                border-radius: 30rpx;\n                                font-size: 26rpx;\n                                color: #fff;\n                                background: linear-gradient(135deg, #ff7676, #f54242);\n                                box-shadow: 0 3rpx 8rpx rgba(0, 0, 0, 0.1);\n                                transition: all 0.3s ease;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        .list-footer {\n            text-align: center;\n            padding: 30rpx 0;\n            color: #999;\n            font-size: 24rpx;\n        }\n\n        .empty-state {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            padding: 150rpx 0;\n\n            .empty-icon {\n                width: 250rpx;\n                height: 250rpx;\n                margin-bottom: 40rpx;\n                opacity: 0.6;\n                animation: float 3s ease-in-out infinite;\n            }\n\n            .empty-text {\n                font-size: 36rpx;\n                color: #999;\n                margin-bottom: 15rpx;\n                text-shadow: 1rpx 1rpx 2rpx rgba(0, 0, 0, 0.1);\n            }\n\n            .empty-subtext {\n                font-size: 28rpx;\n                color: #aaa;\n                margin-bottom: 40rpx;\n            }\n\n            .empty-action {\n                font-size: 30rpx;\n                color: #fff;\n                padding: 25rpx 50rpx;\n                background: linear-gradient(to right, #3494E6, #EC6EAD);\n                border-radius: 50rpx;\n                box-shadow: 0 8rpx 15rpx rgba(52, 148, 230, 0.3);\n                transition: all 0.3s ease;\n            }\n        }\n    }\n}\n\n@keyframes float {\n    0% {\n        transform: translateY(0);\n    }\n\n    50% {\n        transform: translateY(-10rpx);\n    }\n\n    100% {\n        transform: translateY(0);\n    }\n}\n</style>","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/collection/collection.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getReleaseDetail","uni","removeLiked","res","getUserLiked","onLoad"],"mappings":";;;;;;;AAkDM,UAAA,cAAcA,kBAAW,CAAA,CAAE;AAC3B,UAAA,eAAeA,kBAAI,KAAK;AAC1B,QAAA,SAASA,kBAAY,EAAE;AAGrB,UAAA,WAAW,OAAO,cAAsB;AACpC,YAAA,OAAO,MAAMC,yBAAiB,SAAS;AAC7CC,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK,6BAA6B,mBAAmB,KAAK,UAAU,IAAI,CAAC,CAAC;AAAA,MAAA,CAC7E;AAAA,IAAA;AAIC,UAAA,mBAAmB,CAAC,cAAc;AACpCA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,SAAS;AACP,kBAAAC,QAAA,YAAY,QAAQ,SAAS;AAC7BC,kBAAAA,OAAM,MAAMC,qBAAa,MAAM;AACrC,wBAAY,QAAQD;AACpBF,0BAAAA,MAAI,UAAU;AAAA,cACV,OAAO;AAAA,cACP,MAAM;AAAA,YAAA,CACT;AAAA,UACL;AAAA,QACJ;AAAA,MAAA,CACH;AAAA,IAAA;AAIL,UAAM,YAAY,YAAY;AAC1B,mBAAa,QAAQ;AACrB,YAAMG,QAAa,aAAA,MAAM,EAAE,KAAK,CAAO,QAAA;AAAE,oBAAY,QAAQ;AAAA,MAAA,CAAK;AAC5D,YAAA,IAAI,QAAQ,CAAC,YAAY;AAC3B,mBAAW,MAAM;AACb,uBAAa,QAAQ;AACb;WACT,GAAG;AAAA,MAAA,CACT;AAAA,IAAA;AAIL,UAAM,eAAe,MAAM;AACvBH,oBAAAA,MAAI,UAAU;AAAA,QACV,KAAK;AAAA,MAAA,CACR;AAAA,IAAA;AAGLI,kBAAAA,OAAO,MAAM;AACT,eAAS,KAAK,MAAMJ,cAAAA,MAAI,eAAe,UAAU,CAAC,EAAE;AACvCG,cAAAA,aAAA,MAAM,EAAE,KAAK,CAAO,QAAA;AAAE,oBAAY,QAAQ;AAAA,MAAA,CAAK;AAAA,IAAA,CAC/D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtGD,GAAG,WAAW,eAAe;"}