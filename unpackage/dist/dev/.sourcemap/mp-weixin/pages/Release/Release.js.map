{"version":3,"file":"Release.js","sources":["pages/Release/Release.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvUmVsZWFzZS9SZWxlYXNlLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"release-container\">\n\t\t<view class=\"header\">\n\t\t\t<text class=\"title\">发布旅游日记</text>\n\t\t\t<view class=\"my-notes-btn\" @click=\"goToMyNotes\">我的笔记</view>\n\t\t</view>\n\n\t\t<view class=\"form-container\">\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label required\">标题\n\t\t\t\t\t<text style=\"color: rgba(236, 110, 173, 1)\">*</text>\n\t\t\t\t</text>\n\t\t\t\t<input class=\"input\" v-model=\"formData.title\" placeholder=\"请输入旅游日记标题\" />\n\t\t\t\t<text v-if=\"errors.title\" class=\"error-text\">{{ errors.title }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"form-row\">\n\t\t\t\t<view class=\"form-item-half\">\n\t\t\t\t\t<text class=\"label required\">游玩时间\n\t\t\t\t\t\t<text style=\"color: rgba(236, 110, 173, 1)\">*</text>\n\t\t\t\t\t</text>\n\t\t\t\t\t<input class=\"input-short\" type=\"number\" v-model=\"formData.playTime\" placeholder=\"时间/天\" />\n\t\t\t\t\t<text v-if=\"errors.playTime\" class=\"error-text\" style=\"max-width: 140rpx;\">{{ errors.playTime\n\t\t\t\t\t}}</text>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"form-item-half\">\n\t\t\t\t\t<text class=\"label required\">费用\n\t\t\t\t\t\t<text style=\"color: rgba(236, 110, 173, 1)\">*</text>\n\t\t\t\t\t</text>\n\t\t\t\t\t<input class=\"input-short\" type=\"number\" v-model=\"formData.money\" placeholder=\"花费金额\" />\n\t\t\t\t\t<text v-if=\"errors.money\" class=\"error-text\" style=\"max-width: 140rpx;\">{{ errors.money }}</text>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"form-item-half\">\n\t\t\t\t\t<text class=\"label required\">人数\n\t\t\t\t\t\t<text style=\"color: rgba(236, 110, 173, 1)\">*</text>\n\t\t\t\t\t</text>\n\t\t\t\t\t<input class=\"input-short\" type=\"number\" v-model=\"formData.personNum\" placeholder=\"出行人数\" />\n\t\t\t\t\t<text v-if=\"errors.personNum\" class=\"error-text\" style=\"max-width: 140rpx;\">{{ errors.personNum\n\t\t\t\t\t}}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"form-item location-item\">\n\t\t\t\t<text class=\"label required\">位置\n\t\t\t\t\t<text style=\"color: rgba(236, 110, 173, 1)\">*</text>\n\t\t\t\t</text>\n\t\t\t\t<view class=\"location-picker\" @click=\"chooseLocation\">\n\t\t\t\t\t<text>{{ formData.location || '点击选择位置' }}</text>\n\t\t\t\t</view>\n\t\t\t\t<text v-if=\"errors.location\" class=\"error-text\">{{ errors.location }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label required\">内容描述\n\t\t\t\t\t<text style=\"color: rgba(236, 110, 173, 1)\">*</text>\n\t\t\t\t</text>\n\t\t\t\t<textarea class=\"textarea\" v-model=\"formData.content\" placeholder=\"请描述您的旅游体验...\" />\n\t\t\t\t<text v-if=\"errors.content\" class=\"error-text\">{{ errors.content }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label\">图片上传 (最多5张)\n\t\t\t\t\t<text style=\"color: rgba(236, 110, 173, 1)\">*</text>\n\t\t\t\t</text>\n\t\t\t\t<view class=\"upload-area\">\n\t\t\t\t\t<view class=\"upload-preview\" v-for=\"(item, index) in formData.pictures\" :key=\"'pic-' + index\">\n\t\t\t\t\t\t<image class=\"preview-image\" :src=\"item\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t<text class=\"delete-icon\" @click=\"deleteImage(index)\">×</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"upload-btn\" @click=\"chooseImage\" v-if=\"formData.pictures.length < 9\">\n\t\t\t\t\t\t<text class=\"upload-icon\">+</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label\">视频上传 (最多1个)</text>\n\t\t\t\t<view class=\"upload-area\">\n\t\t\t\t\t<view class=\"upload-preview\" v-for=\"(item, index) in formData.videos\" :key=\"'vid-' + index\">\n\t\t\t\t\t\t<video class=\"preview-video\" :src=\"item\"></video>\n\t\t\t\t\t\t<text class=\"delete-icon\" @click=\"deleteVideo(index)\">×</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"upload-btn\" @click=\"chooseVideo\" v-if=\"formData.videos.length === 0\">\n\t\t\t\t\t\t<text class=\"upload-icon\">+</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"form-item\" v-if=\"formData.videos.length > 0\">\n\t\t\t\t<text class=\"label\">视频封面</text>\n\t\t\t\t<view class=\"upload-area\">\n\t\t\t\t\t<view class=\"upload-preview\" v-if=\"formData.cover\">\n\t\t\t\t\t\t<image class=\"preview-image\" :src=\"formData.cover\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t<text class=\"delete-icon\" @click=\"deleteVideoCover\">×</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"upload-btn\" @click=\"chooseVideoCover\" v-if=\"!formData.cover\">\n\t\t\t\t\t\t<text class=\"upload-icon\">+</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<button class=\"submit-btn\" @click=\"submitForm\">发布日记</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue';\nimport { onLoad, onShow } from '@dcloudio/uni-app'\nimport { createRelease } from '../../api/api';\nimport { validateTitle, validateContent, validateLocation } from '../../utils/filter';\n\n// 表单数据\nconst formData = reactive({\n\tuserID: '', // 将从用户登录信息中获取\n\ttitle: '',\n\tplayTime: '',\n\tmoney: '',\n\tpersonNum: '',\n\tcontent: '',\n\tlocation: '',\n\tpictures: [],\n\tvideos: [],\n\tcover: ''\n});\n\n// 错误信息\nconst errors = reactive({\n\ttitle: '',\n\tplayTime: '',\n\tmoney: '',\n\tpersonNum: '',\n\tcontent: '',\n\tlocation: '',\n\tpictures: ''\n})\n\n// 表单验证\nconst validateForm = () => {\n\tlet isValid = true\n\n\t// 重置错误信息\n\tfor (let key in errors) {\n\t\terrors[key] = ''\n\t}\n\n\t// 标题验证\n\tconst titleVal = validateTitle(formData.title)  // 检验敏感词,防SQL注入\n\tif (!titleVal.isValid) {\n\t\terrors.title = titleVal.message\n\t\tisValid = false\n\t} else {\n\t\tformData.title = titleVal.filteredText\n\t}\n\n\t// 游玩时间验证\n\tif (!formData.playTime) {\n\t\terrors.playTime = '游玩时间不能为空'\n\t\tisValid = false\n\t} else if (isNaN(Number(formData.playTime)) || Number(formData.playTime) <= 0) {\n\t\terrors.playTime = '请输入有效的游玩时间'\n\t\tisValid = false\n\t}\n\n\t// 费用验证\n\tif (!formData.money) {\n\t\terrors.money = '费用不能为空'\n\t\tisValid = false\n\t} else if (isNaN(Number(formData.money)) || Number(formData.money) < 0) {\n\t\terrors.money = '请输入有效的费用金额'\n\t\tisValid = false\n\t}\n\n\t// 人数验证\n\tif (!formData.personNum) {\n\t\terrors.personNum = '人数不能为空'\n\t\tisValid = false\n\t} else if (isNaN(Number(formData.personNum)) || Number(formData.personNum) <= 0 || !Number.isInteger(Number(formData.personNum))) {\n\t\terrors.personNum = '请输入有效的人数'\n\t\tisValid = false\n\t}\n\n\t// 位置验证\n\tconst locationVal = validateLocation(formData.location)  // 不能为空或太长\n\tif (!locationVal.isValid) {\n\t\terrors.location = locationVal.message\n\t\tisValid = false\n\t} else {\n\t\tformData.location = locationVal.filteredText\n\t}\n\n\t// 内容验证\n\tconst contentVal = validateContent(formData.content)  // 检验敏感词,防SQL注入\n\tif (!contentVal.isValid) {\n\t\terrors.content = contentVal.message\n\t\tisValid = false\n\t} else {\n\t\tformData.content = contentVal.filteredText\n\t}\n\n\t// 图片验证\n\tif (!formData.pictures || formData.pictures.length === 0) {\n\t\terrors.pictures = '至少上传一张图片';\n\t\tisValid = false;\n\t}\n\n\treturn isValid;\n}\n\n// 提交表单\nconst submitForm = () => {\n\tif (!validateForm()) {\n\t\tuni.showToast({\n\t\t\ttitle: '请完善表单信息',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn\n\t}\n\n\t// 转换数据类型\n\tconst submitData = {\n\t\t...formData,\n\t\tplayTime: Number(formData.playTime),\n\t\tmoney: Number(formData.money),\n\t\tpersonNum: Number(formData.personNum)\n\t};\n\n\t// 提交表单到服务器\n\tuni.showLoading({\n\t\ttitle: '发布中...'\n\t});\n\n\tcreateRelease(submitData).then(async res => {\n\t\tuni.hideLoading()\n\t\tawait new Promise((resolve) => {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '发布成功',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\t\t\tsetTimeout(() => resolve(), 1000)\n\t\t})\n\t\tresetForm();\n\t\t// setTimeout(() => {\n\t\t// \tuni.navigateTo({\n\t\t// \t\turl: '/pages/MyNotes/MyNotes'\n\t\t// \t});\n\t\t// }, 1500);\n\t}).catch(e => { console.log(e) })\n}\n\n// 重置表单\nconst resetForm = () => {\n\t// 保留用户ID，清空其他字段\n\tconst userID = formData.userID\n\n\t// 重置表单数据\n\tObject.assign(formData, {\n\t\tuserID,\n\t\ttitle: '',\n\t\tplayTime: '',\n\t\tmoney: '',\n\t\tpersonNum: '',\n\t\tcontent: '',\n\t\tlocation: '',\n\t\tpictures: [],\n\t\tvideos: [],\n\t\tcover: ''\n\t})\n\n\t// 清空错误信息\n\tfor (let key in errors) {\n\t\terrors[key] = ''\n\t}\n}\n\n// 选择图片\nconst chooseImage = () => {\n\tuni.chooseImage({\n\t\tcount: 9 - formData.pictures.length,\n\t\tsuccess: (res) => {\n\t\t\tformData.pictures = [...formData.pictures, ...res.tempFilePaths]\n\t\t}\n\t})\n}\n\n// 删除图片\nconst deleteImage = (index) => {\n\tformData.pictures.splice(index, 1)\n}\n\n// 选择视频\nconst chooseVideo = () => {\n\tuni.chooseVideo({\n\t\tcount: 1,\n\t\tsuccess: (res) => {\n\t\t\tformData.videos = [res.tempFilePath]\n\t\t}\n\t})\n}\n\n// 删除视频\nconst deleteVideo = (index) => {\n\tformData.videos.splice(index, 1)\n}\n\n// 选择视频封面\nconst chooseVideoCover = () => {\n\tuni.chooseImage({\n\t\tcount: 1,\n\t\tsuccess: (res) => {\n\t\t\tformData.cover = res.tempFilePaths[0]\n\t\t}\n\t})\n}\n\n// 删除视频封面\nconst deleteVideoCover = () => {\n\tformData.cover = ''\n}\n\n// 选择位置\nconst chooseLocation = () => {\n\t// 先检查位置权限\n\tuni.getSetting({\n\t\tsuccess: (res) => {\n\t\t\tif (!res.authSetting['scope.userLocation']) {\n\t\t\t\t// 未授权，申请权限\n\t\t\t\tuni.authorize({\n\t\t\t\t\tscope: 'scope.userLocation',\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t// 获取权限后调用位置选择器\n\t\t\t\t\t\topenChooseLocation()\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\tcontent: '需要您授权位置信息才能选择位置',\n\t\t\t\t\t\t\tconfirmText: '去设置',\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tuni.openSetting()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// 已经授权，直接调用\n\t\t\t\topenChooseLocation()\n\t\t\t}\n\t\t},\n\t\tfail: (err) => {\n\t\t\tconsole.log('获取设置失败', err)\n\t\t\t// 使用手动输入作为备选方案\n\t\t\tshowManualLocationInput()\n\t\t}\n\t})\n}\n\n// 打开位置选择器\nconst openChooseLocation = () => {\n\ttry {\n\t\tuni.chooseLocation({\n\t\t\tsuccess: (res) => {\n\t\t\t\t// 位置选择成功后直接赋值，地图API返回的位置通常是安全的\n\t\t\t\tformData.location = res.name\n\t\t\t},\n\t\t\tfail: (err) => {\n\t\t\t\tconsole.log('选择位置失败', err)\n\t\t\t\tif (err.errMsg && err.errMsg.includes('requiredPrivateInfos')) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '位置服务未配置',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\t// 使用手动输入作为备选方案\n\t\t\t\t\tshowManualLocationInput()\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t} catch (e) {\n\t\tconsole.error('调用选择位置接口失败', e)\n\t\tshowManualLocationInput()\n\t}\n};\n\n// 展示手动输入位置的对话框\nconst showManualLocationInput = () => {\n\tuni.showModal({\n\t\ttitle: '手动输入位置',\n\t\teditable: true,\n\t\tplaceholderText: '请输入您的位置',\n\t\tsuccess: (res) => {\n\t\t\tif (res.confirm && res.content) {\n\t\t\t\t// 手动输入需要进行过滤\n\t\t\t\tconst locationValidation = validateLocation(res.content);\n\t\t\t\tif (locationValidation.isValid) {\n\t\t\t\t\tformData.location = locationValidation.filteredText;\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: locationValidation.message,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n}\n\n// 跳转到我的笔记\nconst goToMyNotes = () => {\n\tuni.navigateTo({\n\t\turl: '/pages/notes/notes'\n\t})\n}\n\nonShow(() => {\n\ttry {\n\t\tconst userInfo = uni.getStorageSync('userInfo')\n\t\tif (userInfo) {\n\t\t\tformData.userID = JSON.parse(userInfo).userId\n\t\t} else {\n\t\t\t// 未登录，跳转到登录页\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/login/login'\n\t\t\t})\n\t\t}\n\t} catch (e) {\n\t\tconsole.error('获取用户信息失败', e)\n\t}\n})\n</script>\n\n<style scoped lang=\"scss\">\n.release-container {\n\tpadding: 30rpx;\n\tbackground: linear-gradient(to bottom, #f0f5ff, #ffffff);\n\tmin-height: 100vh;\n\tposition: relative;\n\n\t&::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\theight: 400rpx;\n\t\tbackground: linear-gradient(135deg, rgba(52, 148, 230, 0.15), rgba(236, 110, 173, 0.1));\n\t\tz-index: -1;\n\t\tborder-radius: 0 0 30% 30%;\n\t}\n\n\t&::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 20%;\n\t\tright: 10%;\n\t\twidth: 100rpx;\n\t\theight: 100rpx;\n\t\tborder-radius: 50%;\n\t\tbackground: linear-gradient(135deg, rgba(236, 110, 173, 0.2), rgba(52, 148, 230, 0.1));\n\t\tfilter: blur(30rpx);\n\t\tz-index: -1;\n\t}\n\n\t.header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 40rpx;\n\n\t\t.title {\n\t\t\tfont-size: 40rpx;\n\t\t\tfont-weight: bold;\n\t\t\tbackground: linear-gradient(90deg, #3494E6, #EC6EAD);\n\t\t\t-webkit-background-clip: text;\n\t\t\tbackground-clip: text;\n\t\t\tcolor: transparent;\n\t\t\ttext-shadow: 1rpx 1rpx 2rpx rgba(0, 0, 0, 0.1);\n\t\t}\n\n\t\t.my-notes-btn {\n\t\t\tbackground: linear-gradient(135deg, #3494E6, #EC6EAD);\n\t\t\tcolor: #fff;\n\t\t\tpadding: 15rpx 30rpx;\n\t\t\tborder-radius: 30rpx;\n\t\t\tfont-size: 28rpx;\n\t\t\tbox-shadow: 0 5rpx 15rpx rgba(52, 148, 230, 0.3);\n\t\t\ttransition: all 0.3s ease;\n\n\t\t\t&:active {\n\t\t\t\ttransform: scale(0.95);\n\t\t\t\tbox-shadow: 0 2rpx 8rpx rgba(52, 148, 230, 0.2);\n\t\t\t}\n\t\t}\n\t}\n\n\t.form-container {\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder-radius: 20rpx;\n\t\tpadding: 30rpx;\n\t\tbox-shadow: 0 0 15rpx 0 rgba(0, 0, 0, 0.1);\n\t\tbackdrop-filter: blur(5rpx);\n\t\tborder: 1px solid rgba(255, 255, 255, 0.6);\n\t\tposition: relative;\n\t\toverflow: hidden;\n\n\t\t.form-item {\n\t\t\tmargin-bottom: 40rpx;\n\t\t\twidth: 100%;\n\n\t\t\t.label {\n\t\t\t\tdisplay: block;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #555;\n\t\t\t\tmargin-bottom: 15rpx;\n\t\t\t\tfont-weight: 500;\n\t\t\t\tposition: relative;\n\t\t\t\tdisplay: inline-block;\n\n\t\t\t\t&::after {\n\t\t\t\t\tcontent: '';\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tbottom: -5rpx;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\twidth: 30rpx;\n\t\t\t\t\theight: 2rpx;\n\t\t\t\t\tbackground: linear-gradient(90deg, #3494E6, transparent);\n\t\t\t\t}\n\n\t\t\t\t&:nth-child(2) {\n\t\t\t\t\tmargin-left: 25rpx;\n\t\t\t\t}\n\n\t\t\t\t&.required:after {\n\t\t\t\t\tcontent: '';\n\t\t\t\t\tcolor: #EC6EAD;\n\t\t\t\t\tmargin-left: 10rpx;\n\t\t\t\t\tbackground: none;\n\t\t\t\t\theight: auto;\n\t\t\t\t\twidth: auto;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.input {\n\t\t\t\twidth: 95%;\n\t\t\t\tborder: 1rpx solid rgba(52, 148, 230, 0.2);\n\t\t\t\tborder-radius: 15rpx;\n\t\t\t\tpadding: 20rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t\t\t\ttransition: all 0.3s ease;\n\t\t\t\tbox-shadow: inset 0 2rpx 5rpx rgba(0, 0, 0, 0.05);\n\n\t\t\t\t&:focus {\n\t\t\t\t\tborder-color: #3494E6;\n\t\t\t\t\tbox-shadow: 0 0 10rpx rgba(52, 148, 230, 0.2);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.textarea {\n\t\t\t\theight: 240rpx;\n\t\t\t\twidth: 95%;\n\t\t\t\tborder: 1rpx solid rgba(52, 148, 230, 0.2);\n\t\t\t\tborder-radius: 15rpx;\n\t\t\t\tpadding: 20rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t\t\t\ttransition: all 0.3s ease;\n\t\t\t\tbox-shadow: inset 0 2rpx 5rpx rgba(0, 0, 0, 0.05);\n\n\t\t\t\t&:focus {\n\t\t\t\t\tborder-color: #3494E6;\n\t\t\t\t\tbox-shadow: 0 0 10rpx rgba(52, 148, 230, 0.2);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.error-text {\n\t\t\t\tcolor: #EC6EAD;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tmargin-top: 10rpx;\n\t\t\t\tbackground-color: rgba(236, 110, 173, 0.1);\n\t\t\t\tpadding: 6rpx 12rpx;\n\t\t\t\tborder-radius: 10rpx;\n\t\t\t\tdisplay: inline-block;\n\t\t\t}\n\n\t\t\t.location-picker {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\talign-items: center;\n\t\t\t\twidth: 95%;\n\t\t\t\tborder: 1rpx solid rgba(52, 148, 230, 0.2);\n\t\t\t\tborder-radius: 15rpx;\n\t\t\t\tpadding: 20rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t\t\t\ttransition: all 0.3s ease;\n\n\t\t\t\t&:active {\n\t\t\t\t\tbackground-color: rgba(52, 148, 230, 0.05);\n\t\t\t\t}\n\n\t\t\t\t.location-icon {\n\t\t\t\t\tmargin-left: 10rpx;\n\t\t\t\t\tfont-size: 32rpx;\n\t\t\t\t\tcolor: #3494E6;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.upload-area {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\tmargin-top: 20rpx;\n\n\t\t\t\t.upload-preview {\n\t\t\t\t\twidth: 180rpx;\n\t\t\t\t\theight: 180rpx;\n\t\t\t\t\tmargin-right: 20rpx;\n\t\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tborder-radius: 15rpx;\n\t\t\t\t\t// overflow: hidden;\n\t\t\t\t\tbox-shadow: 0 3rpx 10rpx rgba(0, 0, 0, 0.1);\n\t\t\t\t\ttransition: all 0.3s ease;\n\n\t\t\t\t\t&:active {\n\t\t\t\t\t\ttransform: scale(0.98);\n\t\t\t\t\t}\n\n\t\t\t\t\t.preview-image,\n\t\t\t\t\t.preview-video {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tborder-radius: inherit;\n\t\t\t\t\t}\n\n\t\t\t\t\t.delete-icon {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: -10rpx;\n\t\t\t\t\t\tright: -10rpx;\n\t\t\t\t\t\twidth: 40rpx;\n\t\t\t\t\t\theight: 40rpx;\n\t\t\t\t\t\tbackground: linear-gradient(135deg, #ff7676, #f54242);\n\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\ttransition: all 0.3s ease;\n\n\t\t\t\t\t\t&:active {\n\t\t\t\t\t\t\ttransform: scale(0.9);\n\t\t\t\t\t\t\tbackground-color: rgba(236, 110, 173, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.upload-btn {\n\t\t\t\t\twidth: 180rpx;\n\t\t\t\t\theight: 180rpx;\n\t\t\t\t\tborder: 2rpx dashed rgba(52, 148, 230, 0.4);\n\t\t\t\t\tborder-radius: 15rpx;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tcolor: #3494E6;\n\t\t\t\t\tbackground-color: rgba(52, 148, 230, 0.05);\n\t\t\t\t\ttransition: all 0.3s ease;\n\n\t\t\t\t\t&:active {\n\t\t\t\t\t\tbackground-color: rgba(52, 148, 230, 0.1);\n\t\t\t\t\t\ttransform: scale(0.98);\n\t\t\t\t\t}\n\n\t\t\t\t\t.upload-icon {\n\t\t\t\t\t\tfont-size: 60rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.form-row {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\t\t\tmargin: 0 -10rpx 20rpx;\n\t\t\twidth: 100%;\n\n\t\t\t.form-item-half {\n\t\t\t\tflex: 1;\n\t\t\t\tmargin: 0 10rpx 20rpx;\n\n\t\t\t\t.label {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tcolor: #555;\n\t\t\t\t\tmargin-bottom: 15rpx;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\tfont-weight: 500;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tdisplay: inline-block;\n\n\t\t\t\t\t&::after {\n\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tbottom: -5rpx;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\twidth: 30rpx;\n\t\t\t\t\t\theight: 2rpx;\n\t\t\t\t\t\tbackground: linear-gradient(90deg, #3494E6, transparent);\n\t\t\t\t\t}\n\n\t\t\t\t\t&:nth-child(2) {\n\t\t\t\t\t\tmargin-left: 25rpx;\n\t\t\t\t\t}\n\n\t\t\t\t\t&.required:after {\n\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\tcolor: #EC6EAD;\n\t\t\t\t\t\tmargin-left: 100rpx;\n\t\t\t\t\t\tbackground: none;\n\t\t\t\t\t\theight: auto;\n\t\t\t\t\t\twidth: auto;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.input-short {\n\t\t\t\t\twidth: 70%;\n\t\t\t\t\tborder: 1rpx solid rgba(52, 148, 230, 0.2);\n\t\t\t\t\tborder-radius: 15rpx;\n\t\t\t\t\tpadding: 20rpx;\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t\t\t\t\ttransition: all 0.3s ease;\n\t\t\t\t\tbox-shadow: inset 0 2rpx 5rpx rgba(0, 0, 0, 0.05);\n\n\t\t\t\t\t&:focus {\n\t\t\t\t\t\tborder-color: #3494E6;\n\t\t\t\t\t\tbox-shadow: 0 0 10rpx rgba(52, 148, 230, 0.2);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.error-text {\n\t\t\t\t\tcolor: #EC6EAD;\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\tmargin-top: 10rpx;\n\t\t\t\t\tbackground-color: rgba(236, 110, 173, 0.1);\n\t\t\t\t\tpadding: 6rpx 12rpx;\n\t\t\t\t\tborder-radius: 10rpx;\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.submit-btn {\n\t\t\tbackground: linear-gradient(to right, #3494E6, #EC6EAD);\n\t\t\tcolor: #fff;\n\t\t\tborder: none;\n\t\t\tborder-radius: 50rpx;\n\t\t\tpadding: 0;\n\t\t\tfont-size: 32rpx;\n\t\t\tmargin-top: 30rpx;\n\t\t\tbox-shadow: 0 10rpx 20rpx rgba(52, 148, 230, 0.3);\n\t\t\ttransition: all 0.3s ease;\n\n\t\t\t&:active {\n\t\t\t\ttransform: scale(0.98);\n\t\t\t\tbox-shadow: 0 5rpx 10rpx rgba(52, 148, 230, 0.2);\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/Release/Release.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","validateTitle","validateLocation","validateContent","uni","createRelease","res","onShow"],"mappings":"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"}