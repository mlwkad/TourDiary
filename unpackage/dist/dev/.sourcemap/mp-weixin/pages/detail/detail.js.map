{"version":3,"file":"detail.js","sources":["pages/detail/detail.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGV0YWlsL2RldGFpbC52dWU"],"sourcesContent":["<template>\n    <view class=\"detail-container\">\n        <swiper class=\"detail-swiper\" v-if=\"(info.pictures.length > 0) && (info.videos.length === 0)\" indicator-dots\n            :indicator-active-color=\"'#3494E6'\" :indicator-color=\"'rgba(255,255,255,0.5)'\" :interval=\"3000\"\n            :duration=\"500\" circular>\n            <swiper-item v-for=\"(item, index) in info.pictures\" :key=\"'pic-' + index\">\n                <image class=\"swiper-image\" :src=\"item\" @click=\"previewImage(info.pictures, index)\" mode=\"aspectFill\">\n                </image>\n            </swiper-item>\n        </swiper>\n        <swiper class=\"detail-swiper\" v-else indicator-dots :indicator-active-color=\"'#3494E6'\"\n            :indicator-color=\"'rgba(255,255,255,0.5)'\" :interval=\"3000\" :duration=\"500\" circular>\n            <swiper-item v-for=\"(item, index) in info.videos\" :key=\"'vid-' + index\">\n                <video class=\"swiper-video\" :src=\"item\" :poster=\"info.cover\" controls direction :id=\"'video-' + index\"\n                    show-fullscreen-btn show-center-play-btn @fullscreenchange=\"fullScreen\" @error=\"videoError\">\n                </video>\n            </swiper-item>\n            <swiper-item v-for=\"(item, index) in info.pictures\" :key=\"'pic-' + index\">\n                <image class=\"swiper-image\" :src=\"item\" @click=\"previewImage(info.pictures, index)\" mode=\"aspectFill\">\n                </image>\n            </swiper-item>\n        </swiper>\n        <view class=\"detail-top\">\n            <view class=\"detail-title\">\n                <text class=\"animated-text\">{{ info.title }}</text>\n                <view class=\"action-buttons\">\n                    <view class=\"detail-liked\" @click=\"liked\">\n                        <text class=\"like-text\">收藏</text>\n                        <text class=\"like-icon\" :style=\"{ color: isLiked ? 'red' : 'white' }\">♥</text>\n                    </view>\n                </view>\n            </view>\n        </view>\n        <view class=\"publisher-container\">\n            <view class=\"publisher-info\">\n                <image class=\"user-avatar\" :src=\"info.avatar\" mode=\"aspectFill\" @click=\"goUserPages\"></image>\n                <view class=\"user-details\">\n                    <text class=\"user-name\" @click=\"goUserPages\">{{ info.userName }}</text>\n                    <text class=\"publish-time\" @click=\"goUserPages\">发布于 {{ info.createdAt.slice(0, 10) }}</text>\n                </view>\n                <view class=\"follow-btn\" @click=\"followPublisher\" v-if=\"!isFollow\">\n                    <text>关注</text>\n                    <image src=\"/static/public/no-follow.png\" style=\"width: 35rpx;height: 35rpx;padding: 13rpx 5rpx;\">\n                    </image>\n                </view>\n                <view class=\"follow-btn\" @click=\"followPublisher\" v-else>\n                    <text>已关注</text>\n                    <image src=\"/static/public/followed.png\" style=\"width: 35rpx;height: 35rpx;padding: 13rpx 5rpx;\">\n                    </image>\n                </view>\n            </view>\n        </view>\n        <view class=\"detail-content\">\n            <view class=\"section-heading\">旅行详情</view>\n            <view class=\"detail-item content-box\">\n                <text class=\"item-value0\">{{ info.content }}</text>\n            </view>\n            <view class=\"detail-item location-box\">\n                <text class=\"item-label\">旅游地点</text>\n                <view class=\"location-wrapper\">\n                    <view class=\"location-wrapper-title\">\n                        <image src=\"/static/public/location.png\" class=\"mini-icon\"></image>\n                        <text class=\"item-value1\">{{ info.location }}</text>\n                    </view>\n                    <view class=\"wantGo\" @click=\"isShowWantLocation = true\">\n                        想去\n                        <image src=\"/static/public/wantGo.png\"></image>\n                    </view>\n                </view>\n            </view>\n            <view class=\"detail-info\">\n                <view class=\"info-item price-item\">\n                    <image src=\"/static/public/money.png\" class=\"info-icon\"></image>\n                    <text>{{ info.money }}元</text>\n                </view>\n                <view class=\"info-item person-item\">\n                    <image src=\"/static/public/person.png\" class=\"info-icon\"></image>\n                    <text>{{ info.personNum }}人</text>\n                </view>\n                <view class=\"info-item time-item\">\n                    <image src=\"/static/public/time.png\" class=\"info-icon\"></image>\n                    <text>{{ info.playTime }}天</text>\n                </view>\n            </view>\n        </view>\n    </view>\n    <view class=\"detail-float\" v-if=\"isShowWantLocation\">\n        <view class=\"detail-float-item\">\n            <view class=\"detail-float-item-option\" style=\"font-weight: 600;font-size: 30rpx;\">\n                旅游规划\n                <image src=\"/static/public/copy.png\" v-if=\"XunFeiRes.length > 0\" @click=\"copyRes\"></image>\n                <image src=\"/static/public/delete.png\" v-if=\"XunFeiRes.length > 0\" @click=\"delRes\"></image>\n            </view>\n            <image src=\"/static/public/close.png\" @click=\"isShowWantLocation = false\">\n            </image>\n        </view>\n        <view class=\"detail-float-choose\" v-if=\"XunFeiRes.length === 0\">\n            <view class=\"detail-float-choose-item\" v-for=\"item in chatChoose\" :key=\"item.id\" :style=\"{\n                background: selectedChoose.find((ele: number) => ele === item.id) ? '#FFA07A' : '#b6b6b635',\n                color: selectedChoose.find((ele: number) => ele === item.id) ? 'white' : '#999'\n            }\" @click=\"chooseSelect(item.id)\">\n                <image :src='selectedChoose.find((ele: number) => ele === item.id) ? item.selectedImage : item.image'>\n                </image>\n                {{ item.title }}\n            </view>\n        </view>\n        <view class=\"detail-float-input\" v-if=\"XunFeiRes.length === 0\">\n            我也想去\n            <input v-model=\"wantGoInput\">\n            <view class=\"detail-float-input-go\" @click=\"getRes\">{{ interval ? '加载中' : 'GO' }}</view>\n        </view>\n        <view v-else class=\"detail-float-res\">\n            <view class=\"detail-float-res-content\">{{ daziji }}</view>\n        </view>\n    </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, defineExpose } from 'vue';\nimport { onLoad, onShow } from '@dcloudio/uni-app'\nimport { addLiked, getUserInfo, follow, unfollow, removeLiked } from '../../api/api';\nimport { streamChat } from '../../api/ws';\n\nconst isLiked = ref<boolean>(false)\nconst isFollow = ref<boolean>(false)\n\nconst isShowWantLocation = ref<boolean>(false)\nconst wantGoInput = ref<any>('')  // onLoad里赋值\nconst XunFeiRes = ref<string>('')\nconst daziji = ref<string>('')\nconst interval = ref<any>(null)\nconst isDone = ref<boolean>(true)\n\nconst selectedChoose = ref([])\n\n// 初始化info对象\nconst info = ref({\n    avatar: \"\",\n    content: \"\",\n    createdAt: \"0000-00-00\",\n    id: 0,\n    location: \"\",\n    money: \"\",\n    personNum: 0,\n    pictures: [\"\"],\n    playTime: 0,\n    releaseID: \"release0\",\n    title: \"\",\n    updatedAt: \"0000-00-00\",\n    userID: \"\",\n    userName: \"testuser0\",\n    videos: []\n})\n\nconst chatChoose = ref([\n    { id: 1, title: '附近景点', image: '/static/public/build.png', selectedImage: '/static/public/build-white.png' },\n    { id: 2, title: '附近美食', image: '/static/public/food.png', selectedImage: '/static/public/food-white.png' },\n    { id: 3, title: '经济旅游', image: '/static/public/sale.png', selectedImage: '/static/public/sale-white.png' },\n    { id: 4, title: '自驾旅游', image: '/static/public/jeepCar.png', selectedImage: '/static/public/jeepCar-white.png' },\n    { id: 5, title: '特色住宿', image: '/static/public/hotal.png', selectedImage: '/static/public/hotal-white.png' },\n    { id: 6, title: '购物攻略', image: '/static/public/shopping.png', selectedImage: '/static/public/shopping-white.png' }\n])\n\nconst chooseSelect = (id: number) => {\n    let storedId = selectedChoose.value.indexOf(id)\n    if (storedId !== -1) {\n        selectedChoose.value.splice(storedId, 1)\n    } else {\n        selectedChoose.value.push(id)\n    }\n}\n\nconst getRes = () => {\n    const allChoose = chatChoose.value.filter(item => selectedChoose.value.includes(item.id))\n    let allChooseTitle = ''\n    allChoose.forEach((item) => {\n        allChooseTitle += (item.title + ',')\n    })\n    const finalContent = `我想去${wantGoInput.value}游玩,并为我提供${allChooseTitle}的建议,分点明确(一级标题:一,二 二级标题:1,2),不要出现*#等特殊符号`\n    isDone.value = false\n    turnDaziji()\n    streamChat(finalContent, (update) => {\n        if (update.type === 'update') {\n            XunFeiRes.value += update.content\n        } else if (update.type === 'error') {\n            uni.__f__('log','at pages/detail/detail.vue:186',update.error)\n        } else if (update.type === 'done' || 'end') {\n            isDone.value = true\n        }\n    })\n}\n\nconst turnDaziji = () => {\n    let index = 0\n    const typeNextChar = () => {\n        if (XunFeiRes.value.length >= index) {\n            daziji.value = XunFeiRes.value.slice(0, index)\n            index++\n            const delay = Math.max(5, 50 - Math.floor(index / 20))\n            interval.value = setTimeout(typeNextChar, delay)\n        } else {\n            if (isDone.value && interval.value) {\n                clearTimeout(interval.value)\n                interval.value = null\n            } else {\n                interval.value = setTimeout(typeNextChar, 100)\n            }\n        }\n    }\n    typeNextChar()\n}\n\nconst copyRes = () => {\n    uni.setClipboardData({\n        data: XunFeiRes.value,\n        success: () => {\n            uni.showToast({\n                title: '复制成功',\n                icon: 'none'\n            })\n        }\n    })\n}\n\nconst delRes = () => {\n    XunFeiRes.value = ''\n}\n\nconst liked = async () => {\n    try {\n        const userId = JSON.parse(uni.getStorageSync('userInfo')).userId\n        if (!isLiked.value) {\n            await addLiked(userId, info.value.releaseID)\n            uni.showToast({\n                title: '收藏成功',\n                icon: 'none'\n            })\n        } else {\n            await removeLiked(userId, info.value.releaseID)\n            uni.showToast({\n                title: '取消收藏',\n                icon: 'none'\n            })\n        }\n        const userInfoRes = await getUserInfo(userId)\n        isLiked.value = JSON.parse(userInfoRes.liked).includes(info.value.releaseID)\n    } catch (e) {\n        uni.__f__('log','at pages/detail/detail.vue:248',e)\n        uni.showToast({\n            title: '操作失败',\n            icon: 'none'\n        })\n    }\n}\n\n// 用户详情页\nconst goUserPages = () => {\n    uni.navigateTo({\n        url: `/pages/follow/works?userID=${info.value.userID}`\n    })\n}\n\n// 因为设置了setup\ndefineExpose({\n    onShareAppMessage() {\n        return {\n            title: '旅游日记分享',\n            path: `/pages/detail/detail?info=${encodeURIComponent(JSON.stringify(info.value))}`,\n            imageUrl: info.value.pictures[0] || ''\n        }\n    },\n    onShareTimeline() {\n        return {\n            title: '旅游日记分享',\n            // 默认自带本页路径,只需写查询参数\n            query: `info=${encodeURIComponent(JSON.stringify(info.value))}`,\n            imageUrl: info.value.pictures[0] || ''\n        }\n    }\n})\n\nconst followPublisher = () => {\n    const userId = JSON.parse(uni.getStorageSync('userInfo')).userId\n    if (!isFollow.value) {\n        uni.showModal({\n            title: '关注提示',\n            content: `确定要关注\"${info.value.userName}\"吗？`,\n            success: async (res) => {\n                if (res.confirm) {\n                    try {\n                        await follow(userId, { followUserID: info.value.userID })\n                        uni.showToast({\n                            title: '关注成功',\n                            icon: 'none'\n                        })\n                        const userInfoRes = await getUserInfo(userId)\n                        isFollow.value = userInfoRes.follow.includes(info.value.userID)\n                    } catch (e) {\n                        uni.__f__('log','at pages/detail/detail.vue:299',e)\n                        uni.showToast({\n                            title: e,\n                            icon: 'none'\n                        })\n                    }\n                }\n            }\n        })\n    } else {\n        uni.showModal({\n            title: '取关提示',\n            content: `确定要取消关注\"${info.value.userName}\"吗？`,\n            success: async (res) => {\n                if (res.confirm) {\n                    try {\n                        await unfollow(userId, info.value.userID)\n                        uni.showToast({\n                            title: '已取消关注',\n                            icon: 'none'\n                        })\n                        const userInfoRes = await getUserInfo(userId)\n                        isFollow.value = userInfoRes.follow.includes(info.value.userID)\n                    } catch (e) {\n                        uni.__f__('log','at pages/detail/detail.vue:323',e)\n                        uni.showToast({\n                            title: '操作失败',\n                            icon: 'none'\n                        })\n                    }\n                }\n            }\n        })\n    }\n}\n\nconst previewImage = (images: string[], current: number) => {\n    const stringUrls = images.map(img => String(img))\n    uni.previewImage({\n        urls: stringUrls,  // 地址列表\n        current: stringUrls[current],  // 显示第几张\n        fail: (e) => {\n            uni.__f__('error','at pages/detail/detail.vue:341','预览失败:', e)\n        }\n    })\n}\n\nconst fullScreen = (event) => {\n    const isFullScreen = event.detail.fullScreen || event.detail.fullscreen\n    const direction = event.detail.direction\n    if (isFullScreen) {\n        uni.showToast({\n            title: `已进入${direction === 'vertical' ? '竖向' : '横向'}全屏模式`,\n            icon: 'none',\n            duration: 1500\n        })\n    } else {\n        uni.showToast({\n            title: '已退出全屏模式',\n            icon: 'none',\n            duration: 1500\n        })\n    }\n}\n\nconst videoError = (e) => {\n    uni.__f__('error','at pages/detail/detail.vue:365','视频播放错误:', e.detail)\n    uni.showToast({\n        title: '视频播放失败',\n        icon: 'none'\n    })\n}\n\nonLoad(async (options) => {\n    try {\n        if (options.info) {\n            const decodedInfo = JSON.parse(decodeURIComponent(options.info))\n            info.value = decodedInfo\n        }\n        wantGoInput.value = info.value.location\n        // 获取收藏列表\n        if (info.value.userID) {\n            const userId = JSON.parse(uni.getStorageSync('userInfo')).userId\n            getUserInfo(userId).then(res => {\n                isLiked.value = JSON.parse(res.liked).includes(info.value.releaseID)\n                isFollow.value = res.follow.includes(info.value.userID)\n            })\n        }\n    } catch (e) {\n        uni.__f__('log','at pages/detail/detail.vue:388',e)\n    }\n})\n\nonShow(() => {  // 不接收参数\n    try {\n        // 获取收藏列表\n        if (info.value.userID) {\n            const userId = JSON.parse(uni.getStorageSync('userInfo')).userId\n            getUserInfo(userId).then(res => {\n                isLiked.value = JSON.parse(res.liked).includes(info.value.releaseID)\n                isFollow.value = res.follow.includes(info.value.userID)\n            })\n        }\n    } catch (e) {\n        uni.__f__('log','at pages/detail/detail.vue:403',e)\n    }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.detail-container {\n    padding-bottom: 100rpx;\n    background: linear-gradient(to bottom, #f0f5ff, #ffffff);\n    min-height: 100vh;\n    position: relative;\n\n    &::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 800rpx;\n        background: linear-gradient(135deg, rgba(52, 148, 230, 0.15), rgba(236, 110, 173, 0.1));\n        z-index: -1;\n        border-radius: 0 0 30% 30%;\n    }\n\n    &::after {\n        content: '';\n        position: absolute;\n        top: 15%;\n        right: 5%;\n        width: 120rpx;\n        height: 120rpx;\n        border-radius: 50%;\n        background: linear-gradient(135deg, rgba(236, 110, 173, 0.2), rgba(52, 148, 230, 0.1));\n        filter: blur(30rpx);\n        z-index: -1;\n    }\n}\n\n.detail-swiper {\n    width: 100%;\n    height: 500rpx;\n    box-shadow: 0 10rpx 20rpx rgba(0, 0, 0, 0.244);\n    overflow: hidden;\n    position: relative;\n\n    &::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 100rpx;\n        background: linear-gradient(to top, rgba(0, 0, 0, 0.3), transparent);\n        z-index: 1;\n        pointer-events: none;\n    }\n\n    .swiper-image,\n    .swiper-video {\n        width: 100%;\n        height: 100%;\n        transition: transform 0.3s ease;\n    }\n\n    .swiper-nothing {\n        width: 50%;\n        height: 80%;\n        transform: translateX(49%);\n        opacity: 0.8;\n        animation: float 3s ease-in-out infinite;\n    }\n\n    .swiper-nothing-title {\n        transform: translateX(38%);\n        font-size: 32rpx;\n        color: #999;\n        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    }\n}\n\n@keyframes float {\n    0% {\n        transform: translateX(49%) translateY(0);\n    }\n\n    50% {\n        transform: translateX(49%) translateY(-10rpx);\n    }\n\n    100% {\n        transform: translateX(49%) translateY(0);\n    }\n}\n\n.detail-top {\n    margin: 20rpx;\n    padding: 20rpx;\n    background-color: rgba(255, 255, 255, 0.9);\n    border-radius: 20rpx;\n    box-shadow: 0 5rpx 15rpx rgba(0, 0, 0, 0.252);\n    backdrop-filter: blur(10rpx);\n    border: 1px solid rgba(255, 255, 255, 0.6);\n    position: relative;\n    overflow: hidden;\n\n    .detail-title {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        width: 100%;\n\n        .animated-text {\n            position: relative;\n            display: inline-block;\n            background: linear-gradient(90deg, #3494E6, #EC6EAD);\n            -webkit-background-clip: text;\n            background-clip: text;\n            color: transparent;\n            font-size: 40rpx;\n            font-weight: bold;\n            max-width: 55%;\n\n            &::after {\n                content: '';\n                position: absolute;\n                bottom: -6rpx;\n                left: 0;\n                width: 100%;\n                height: 2rpx;\n                background: linear-gradient(90deg, #3494E6, #EC6EAD);\n            }\n        }\n\n        .action-buttons {\n            display: flex;\n            gap: 15rpx;\n        }\n\n        .detail-liked,\n        .detail-share {\n            white-space: nowrap;\n            padding: 10rpx 20rpx;\n            font-size: 30rpx;\n            font-weight: 500;\n            color: white;\n            border-radius: 30rpx;\n            box-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.2);\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8rpx;\n\n            &:active {\n                transform: scale(0.95);\n            }\n        }\n\n        .detail-liked {\n            background: linear-gradient(135deg, #3494E6, #EC6EAD);\n\n            .like-icon {\n                font-size: 45rpx;\n                transition: transform 0.3s ease;\n                color: white;\n            }\n\n            &:active .like-icon {\n                transform: scale(1.5);\n            }\n        }\n\n        .detail-share {\n            background: linear-gradient(135deg, #3CB371, #20B2AA);\n\n            .share-icon {\n                font-size: 37rpx;\n                transition: transform 0.3s ease;\n                color: white;\n            }\n\n            &:active .share-icon {\n                transform: translateY(-3rpx) translateX(3rpx);\n            }\n        }\n\n        .detail-liked .like-icon.liked {\n            animation: heartBeat 1s ease;\n            color: #ff496e;\n        }\n    }\n}\n\n@keyframes shimmer {\n    0% {\n        transform: translateX(-150%) rotate(30deg);\n    }\n\n    100% {\n        transform: translateX(150%) rotate(30deg);\n    }\n}\n\n@keyframes heartBeat {\n    0% {\n        transform: scale(1);\n    }\n\n    25% {\n        transform: scale(1.4);\n    }\n\n    50% {\n        transform: scale(1);\n    }\n\n    75% {\n        transform: scale(1.2);\n    }\n\n    100% {\n        transform: scale(1);\n    }\n}\n\n.detail-content {\n    margin: 20rpx;\n    padding: 30rpx;\n    background-color: rgba(255, 255, 255, 0.9);\n    border-radius: 20rpx;\n    box-shadow: 0 5rpx 15rpx rgba(0, 0, 0, 0.248);\n    backdrop-filter: none;\n    position: relative;\n    border: 1px solid rgba(255, 255, 255, 0.6);\n\n    &::before {\n        content: '';\n        position: absolute;\n        top: 5%;\n        left: 5%;\n        width: 90%;\n        height: 90%;\n        border-radius: 20rpx;\n        box-shadow: inset 0 0 30rpx rgba(52, 148, 230, 0.05);\n        pointer-events: none;\n    }\n\n    .section-heading {\n        font-size: 36rpx;\n        font-weight: 600;\n        margin-bottom: 30rpx;\n        color: #333;\n        position: relative;\n        display: inline-block;\n        padding-bottom: 10rpx;\n\n        &::after {\n            content: '';\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            width: 60rpx;\n            height: 4rpx;\n            background: linear-gradient(90deg, #3494E6, #EC6EAD);\n            border-radius: 4rpx;\n            transition: width 0.3s ease;\n        }\n\n        &:active::after {\n            width: 100%;\n        }\n    }\n\n    .detail-item {\n        margin-bottom: 30rpx;\n        transition: none;\n\n        .item-label {\n            font-size: 30rpx;\n            color: #555;\n            margin-right: 10rpx;\n            position: relative;\n            display: inline-block;\n            font-weight: 500;\n            margin-bottom: 15rpx;\n\n            &::after {\n                content: '';\n                position: absolute;\n                bottom: -5rpx;\n                left: 0;\n                width: 100%;\n                height: 3rpx;\n                background: linear-gradient(90deg, #3494E6, transparent);\n            }\n        }\n\n        .item-value0 {\n            font-size: 32rpx;\n            color: #000000;\n            font-weight: 400;\n            line-height: 1.6;\n            display: block;\n            padding: 25rpx;\n            border-left: 8rpx solid #3494E6;\n            margin: 15rpx 0;\n            background: linear-gradient(90deg, rgba(52, 148, 230, 0.1), rgba(236, 110, 173, 0.05));\n            border-radius: 15rpx;\n            box-shadow: none;\n        }\n\n        .location-wrapper {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            background: linear-gradient(90deg, rgba(52, 148, 230, 0.1), rgba(236, 110, 173, 0.05));\n            padding: 15rpx 20rpx;\n            border-radius: 50rpx;\n\n            .location-wrapper-title {\n                display: flex;\n                align-items: center;\n\n                .mini-icon {\n                    width: 32rpx;\n                    height: 32rpx;\n                    margin-right: 10rpx;\n                }\n\n                .item-value1 {\n                    font-size: 28rpx;\n                    color: #333;\n                    font-weight: 500;\n                }\n            }\n\n            .wantGo {\n                background: linear-gradient(90deg, #3494E6, #EC6EAD);\n                margin-left: 45rpx;\n                border-radius: 24rpx;\n                padding: 12rpx 16rpx 15rpx;\n                color: white;\n                white-space: nowrap;\n\n                image {\n                    height: 35rpx;\n                    width: 35rpx;\n                    transform: translateY(10rpx);\n                }\n            }\n        }\n    }\n\n    .content-box {\n        position: relative;\n        border-radius: 15rpx;\n        transition: none;\n        overflow: hidden;\n\n        &::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: linear-gradient(135deg, rgba(52, 148, 230, 0.05), rgba(236, 110, 173, 0.05));\n            z-index: -1;\n            opacity: 0.2;\n        }\n\n        &:active {\n            transform: none;\n        }\n    }\n\n    .location-box {\n        margin-top: 40rpx;\n    }\n\n    .detail-info {\n        display: flex;\n        justify-content: space-between;\n        padding: 40rpx 0 20rpx;\n        border-top: 2rpx dashed rgba(52, 148, 230, 0.3);\n        margin-top: 30rpx;\n        position: relative;\n\n        .info-item {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            padding: 25rpx 20rpx;\n            border-radius: 15rpx;\n            width: 30%;\n            transition: all 0.3s ease;\n            position: relative;\n            overflow: hidden;\n\n            &::before {\n                content: '';\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(135deg, rgba(52, 148, 230, 0.1), rgba(236, 110, 173, 0.05));\n                z-index: -1;\n                opacity: 0;\n                transition: opacity 0.3s ease;\n            }\n\n            &:active {\n                transform: translateY(-8rpx);\n                box-shadow: 0 8rpx 15rpx rgba(0, 0, 0, 0.1);\n\n                &::before {\n                    opacity: 1;\n                }\n            }\n\n            .info-icon {\n                width: 60rpx;\n                height: 60rpx;\n                margin-bottom: 15rpx;\n                transition: transform 0.3s ease;\n            }\n\n            &:active .info-icon {\n                transform: scale(1.1);\n            }\n\n            text {\n                font-size: 28rpx;\n                color: #444;\n                font-weight: 500;\n            }\n        }\n\n        .price-item {\n            background: linear-gradient(135deg, rgba(52, 148, 230, 0.08), rgba(52, 148, 230, 0.15));\n            box-shadow: 0 5rpx 15rpx rgba(52, 148, 230, 0.1);\n        }\n\n        .person-item {\n            background: linear-gradient(135deg, rgba(236, 110, 173, 0.08), rgba(236, 110, 173, 0.15));\n            box-shadow: 0 5rpx 15rpx rgba(236, 110, 173, 0.1);\n        }\n\n        .time-item {\n            background: linear-gradient(135deg, rgba(122, 204, 117, 0.08), rgba(122, 204, 117, 0.15));\n            box-shadow: 0 5rpx 15rpx rgba(122, 204, 117, 0.1);\n        }\n    }\n}\n\n.detail-actions {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    padding: 20rpx;\n    background-color: rgba(255, 255, 255, 0.95);\n    border-top: 1rpx solid #eee;\n    backdrop-filter: blur(10rpx);\n\n    .action-btn {\n        flex: 1;\n        margin: 0 10rpx;\n        background: linear-gradient(135deg, #3494E6, #EC6EAD);\n        color: #fff;\n        font-size: 28rpx;\n        padding: 15rpx 0;\n        border-radius: 50rpx;\n        box-shadow: 0 5rpx 15rpx rgba(52, 148, 230, 0.3);\n        transition: all 0.3s ease;\n\n        &:active {\n            transform: scale(0.98);\n            box-shadow: 0 2rpx 8rpx rgba(52, 148, 230, 0.2);\n        }\n    }\n}\n\n.publisher-container {\n    margin: 20rpx;\n    padding: 20rpx;\n    background-color: rgba(255, 255, 255, 0.9);\n    border-radius: 20rpx;\n    box-shadow: 0 5rpx 15rpx rgba(0, 0, 0, 0.252);\n    backdrop-filter: blur(10rpx);\n    border: 1px solid rgba(255, 255, 255, 0.6);\n    position: relative;\n    overflow: hidden;\n\n    .publisher-info {\n        display: flex;\n        align-items: center;\n        position: relative;\n\n        .user-avatar {\n            width: 100rpx;\n            height: 100rpx;\n            border-radius: 50%;\n            border: 3rpx solid #fff;\n            box-shadow: 0 3rpx 10rpx rgba(0, 0, 0, 0.1);\n        }\n\n        .user-details {\n            margin-left: 20rpx;\n            flex: 1;\n\n            .user-name {\n                font-size: 32rpx;\n                font-weight: 500;\n                background: linear-gradient(90deg, #333, #666);\n                -webkit-background-clip: text;\n                background-clip: text;\n                color: transparent;\n                display: block;\n                margin-bottom: 8rpx;\n            }\n\n            .publish-time {\n                font-size: 24rpx;\n                color: #999;\n            }\n        }\n\n        .follow-btn {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8rpx;\n            background: linear-gradient(135deg, #4CAF50, #8BC34A);\n            color: white;\n            padding: 10rpx 25rpx;\n            border-radius: 30rpx;\n            font-size: 28rpx;\n            box-shadow: 0 4rpx 8rpx rgba(76, 175, 80, 0.3);\n            transition: all 0.3s ease;\n\n            &:active {\n                transform: scale(0.95);\n                box-shadow: 0 2rpx 5rpx rgba(76, 175, 80, 0.2);\n            }\n\n            .follow-icon {\n                font-size: 43rpx;\n                font-weight: bold;\n                transform: translateY(-2rpx);\n            }\n        }\n    }\n}\n\n.detail-float {\n    overflow-y: auto;\n    width: 100%;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: fit-content;\n    min-height: 30%;\n    max-height: 85%;\n    background-color: #ffffff;\n    border-radius: 28rpx 28rpx 0 0;\n    z-index: 99999;\n    animation: toTop 0.3s ease-in-out forwards;\n    padding-bottom: 45rpx;\n    box-shadow: 0 -4rpx 20rpx rgba(0, 0, 0, 0.15);\n\n    @keyframes toTop {\n        0% {\n            transform: translateY(50%);\n            opacity: 0;\n        }\n\n        100% {\n            transform: translateY(0);\n            opacity: 1;\n        }\n    }\n\n    .detail-float-item {\n        width: 92%;\n        height: 110rpx;\n        border-radius: 10rpx;\n        padding: 0 30rpx;\n        margin: 0 auto;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        border-bottom: 1rpx solid rgba(0, 0, 0, 0.05);\n\n        image {\n            width: 36rpx;\n            height: 36rpx;\n            padding: 12rpx;\n        }\n\n        .detail-float-item-option {\n            display: flex;\n            align-items: center;\n            gap: 35rpx;\n            color: #333;\n\n            image {\n                margin-left: 35rpx;\n                border-radius: 50%;\n                width: 40rpx;\n                height: 40rpx;\n                background-color: rgba(52, 148, 230, 0.1);\n                padding: 8rpx;\n            }\n        }\n    }\n\n    .detail-float-choose {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: space-between;\n        flex-wrap: wrap;\n        padding: 20rpx 24rpx;\n        gap: 15rpx;\n\n        .detail-float-choose-item {\n            width: fit-content;\n            height: fit-content;\n            border-radius: 24rpx;\n            color: #999;\n            white-space: nowrap;\n            padding: 18rpx 25rpx;\n            margin-bottom: 25rpx;\n            transition: all 0.3s ease-in-out;\n            font-weight: 600;\n            font-size: 28rpx;\n            border: 2rpx solid rgba(128, 128, 128, 0.2);\n            box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n\n            image {\n                width: 32rpx;\n                height: 32rpx;\n                margin-right: 12rpx;\n                transform: translateY(4rpx);\n            }\n        }\n    }\n\n    .detail-float-input {\n        padding: 20rpx 30rpx;\n        display: flex;\n        align-items: center;\n        gap: 15rpx;\n        font-size: 30rpx;\n        font-weight: 600;\n        color: #333;\n\n        .detail-float-input-go {\n            background: linear-gradient(135deg, #3494E6, #EC6EAD);\n            color: #fff;\n            font-size: 28rpx;\n            padding: 20rpx 30rpx;\n            border-radius: 50rpx;\n            box-shadow: 0 5rpx 15rpx rgba(52, 148, 230, 0.2);\n            font-weight: bold;\n        }\n\n        input {\n            flex: 1;\n            padding: 15rpx;\n            border-radius: 10rpx;\n            background-color: rgba(0, 0, 0, 0.03);\n            border: 1rpx solid rgba(128, 128, 128, 0.2);\n        }\n    }\n\n    .detail-float-res {\n        font-size: 30rpx;\n        font-weight: 600;\n        padding: 10rpx 30rpx;\n\n        .detail-float-res-content {\n            border-top: rgba(128, 128, 128, 0.2) 2rpx solid;\n            padding: 25rpx 15rpx;\n            margin-top: 12rpx;\n            line-height: 1.6;\n            font-weight: 400;\n            white-space: pre-wrap; // 保留空格 换行 - 自动换行\n            color: #333;\n            background-color: rgba(52, 148, 230, 0.05);\n            border-radius: 12rpx;\n        }\n    }\n}\n</style>","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/detail/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","streamChat","uni","addLiked","removeLiked","getUserInfo","follow","unfollow","onLoad","onShow"],"mappings":"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"}