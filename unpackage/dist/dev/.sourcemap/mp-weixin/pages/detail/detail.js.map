{"version":3,"file":"detail.js","sources":["pages/detail/detail.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGV0YWlsL2RldGFpbC52dWU"],"sourcesContent":["<template>\r\n    <view class=\"detail-container\">\r\n        <!-- 轮播图展示pictures和videos -->\r\n        <swiper class=\"detail-swiper\" v-if=\"(info.pictures.length === 0) && (info.videos.length === 0)\" indicator-dots\r\n            autoplay :interval=\"3000\" :duration=\"500\" circular>\r\n            <swiper-item>\r\n                <image class=\"swiper-nothing\" src=\"/static/public/nothing.png\" mode=\"aspectFill\"></image>\r\n                <view class=\"swiper-nothing-title\">暂无相关内容</view>\r\n            </swiper-item>\r\n        </swiper>\r\n        <swiper class=\"detail-swiper\" v-else-if=\"(info.pictures.length === 0) && (info.videos.length > 0)\"\r\n            indicator-dots autoplay :interval=\"3000\" :duration=\"500\" circular>\r\n            <swiper-item v-for=\"(item, index) in info.videos\" :key=\"'vid-' + index\">\r\n                <video class=\"swiper-video\" src=\"\"></video>\r\n            </swiper-item>\r\n        </swiper>\r\n        <swiper class=\"detail-swiper\" v-else-if=\"(info.pictures.length > 0) && (info.videos.length === 0)\"\r\n            indicator-dots autoplay :interval=\"3000\" :duration=\"500\" circular>\r\n            <swiper-item v-for=\"(item, index) in info.pictures\" :key=\"'pic-' + index\">\r\n                <image class=\"swiper-image\" src=\"/static/555.jpg\" @click=\"previewImage(info.pictures, index)\"\r\n                    mode=\"aspectFill\"></image>\r\n            </swiper-item>\r\n        </swiper>\r\n        <swiper class=\"detail-swiper\" v-else indicator-dots autoplay :interval=\"3000\" :duration=\"500\" circular>\r\n            <swiper-item v-for=\"(item, index) in info.videos\" :key=\"'vid-' + index\">\r\n                <video class=\"swiper-video\" src=\"\"></video>\r\n            </swiper-item>\r\n            <swiper-item v-for=\"(item, index) in info.pictures\" :key=\"'pic-' + index\">\r\n                <image class=\"swiper-image\" src=\"/static/555.jpg\" @click=\"previewImage(info.pictures, index)\"\r\n                    mode=\"aspectFill\"></image>\r\n            </swiper-item>\r\n        </swiper>\r\n        <view class=\"detail-top\">\r\n            <!-- 标题部分 -->\r\n            <view class=\"detail-title\">\r\n                <text>{{ info.title }}</text>\r\n                <view class=\"detail-liked\" @click=\"liked\">收藏</view>\r\n            </view>\r\n            <!-- 用户信息部分 -->\r\n            <view class=\"user-info\">\r\n                <image class=\"user-avatar\" src=\"/static/666.jpg\" mode=\"aspectFill\"></image>\r\n                <text class=\"user-name\">{{ info.userName }}</text>\r\n            </view>\r\n        </view>\r\n        <!-- 内容详情部分 -->\r\n        <view class=\"detail-content\">\r\n            <view class=\"detail-item\">\r\n                <!-- <text class=\"item-label\">内容描述:</text> -->\r\n                <text class=\"item-value0\">{{ info.content }}</text>\r\n            </view>\r\n\r\n            <view class=\"detail-item\">\r\n                <text class=\"item-label\">旅游地点:</text>\r\n                <text class=\"item-value1\">{{ info.location }}</text>\r\n            </view>\r\n\r\n            <view class=\"detail-info\">\r\n                <view class=\"info-item\">\r\n                    <image src=\"/static/public/money.png\" class=\"info-icon\"></image>\r\n                    <text>{{ info.money }}元</text>\r\n                </view>\r\n\r\n                <view class=\"info-item\">\r\n                    <image src=\"/static/public/person.png\" class=\"info-icon\"></image>\r\n                    <text>{{ info.personNum }}人</text>\r\n                </view>\r\n\r\n                <view class=\"info-item\">\r\n                    <image src=\"/static/public/time.png\" class=\"info-icon\"></image>\r\n                    <text>{{ info.playTime }}分钟</text>\r\n                </view>\r\n            </view>\r\n        </view>\r\n\r\n        <!-- 底部操作按钮 -->\r\n        <!-- <view class=\"detail-actions\">\r\n            <button class=\"action-btn\">联系发布者</button>\r\n            <button class=\"action-btn\">收藏</button>\r\n        </view> -->\r\n    </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue';\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport { addLiked } from '../../api/api';\r\n\r\n// 初始化info对象\r\nconst info = ref({\r\n    avatar: \"https://example.com/avatar2.jpg\",\r\n    content: \"这是一个测试发布内容3\",\r\n    createdAt: \"2025-05-03T11:28:49.000Z\",\r\n    id: 3,\r\n    location: \"广州市天河区\",\r\n    money: \"300.00\",\r\n    personNum: 1,\r\n    pictures: [\"https://example.com/pic4.jpg\", \"https://example.com/pic5.jpg\"],\r\n    playTime: 90,\r\n    releaseID: \"release3\",\r\n    title: \"广州一日游\",\r\n    updatedAt: \"2025-05-03T11:28:49.000Z\",\r\n    userID: \"user2\",\r\n    userName: \"testuser2\",\r\n    videos: []\r\n});\r\n\r\nconst liked = () => {\r\n    const userId = JSON.parse(uni.getStorageSync('userInfo')).userId\r\n    try {\r\n        addLiked(userId, info.value.releaseID).then(res => {\r\n            uni.showToast({\r\n                title: res.message,\r\n                icon: 'none'\r\n            })\r\n        })\r\n    } catch (e) { uni.__f__('log','at pages/detail/detail.vue:116',e) }\r\n}\r\n\r\nconst previewImage = (images: string[], current: number) => {\r\n    uni.previewImage({\r\n        urls: images,  // [url1,url2] 图片地址数组  \r\n        current: images[current]  // 当前显示的图片索引\r\n    })\r\n}\r\n\r\nonLoad((options) => {\r\n    try {\r\n        if (options.info) {\r\n            const decodedInfo = JSON.parse(decodeURIComponent(options.info))\r\n            info.value = decodedInfo\r\n        } else {\r\n            uni.__f__('log','at pages/detail/detail.vue:132','没拿到信息')\r\n        }\r\n    } catch (e) {\r\n        uni.__f__('log','at pages/detail/detail.vue:135',e)\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.detail-container {\r\n    padding-bottom: 100rpx;\r\n}\r\n\r\n.detail-swiper {\r\n    width: 100%;\r\n    height: 500rpx;\r\n\r\n    .swiper-image,\r\n    .swiper-video {\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .swiper-nothing {\r\n        width: 50%;\r\n        height: 80%;\r\n        transform: translateX(49%);\r\n    }\r\n\r\n    .swiper-nothing-title {\r\n        transform: translateX(38%);\r\n    }\r\n}\r\n\r\n.detail-top {\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    .detail-title {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 20rpx;\r\n        font-size: 40rpx;\r\n        font-weight: bold;\r\n        padding: 30rpx 20rpx 20rpx;\r\n\r\n        .detail-liked {\r\n            white-space: nowrap;\r\n            background-color: #1296db;\r\n            height: fit-content;\r\n            width: fit-content;\r\n            padding: 10rpx;\r\n            font-size: 30rpx;\r\n            font-weight: 400;\r\n            color: white;\r\n            border-radius: 12rpx;\r\n        }\r\n    }\r\n\r\n    .user-info {\r\n        display: flex;\r\n        align-items: center;\r\n        padding: 20rpx;\r\n        border-bottom: 1rpx solid #eee;\r\n\r\n        .user-avatar {\r\n            width: 80rpx;\r\n            height: 80rpx;\r\n            border-radius: 50%;\r\n            margin-right: 20rpx;\r\n        }\r\n\r\n        .user-name {\r\n            font-size: 28rpx;\r\n            color: #333;\r\n        }\r\n    }\r\n}\r\n\r\n.detail-content {\r\n    padding: 20rpx;\r\n\r\n    .detail-item {\r\n        margin-bottom: 20rpx;\r\n\r\n        .item-label {\r\n            font-size: 28rpx;\r\n            color: #666;\r\n            margin-right: 10rpx;\r\n        }\r\n\r\n        .item-value0 {\r\n            font-size: 35rpx;\r\n            color: #333;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .item-value1 {\r\n            font-size: 28rpx;\r\n            color: #333;\r\n        }\r\n    }\r\n\r\n    .detail-info {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        padding: 30rpx 0;\r\n        border-top: 1rpx solid #eee;\r\n\r\n        .info-item {\r\n            display: flex;\r\n            align-items: center;\r\n\r\n            .info-icon {\r\n                width: 40rpx;\r\n                height: 40rpx;\r\n                margin-right: 10rpx;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.detail-actions {\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    display: flex;\r\n    padding: 20rpx;\r\n    background-color: #fff;\r\n    border-top: 1rpx solid #eee;\r\n\r\n    .action-btn {\r\n        flex: 1;\r\n        margin: 0 10rpx;\r\n        background-color: #1296db;\r\n        color: #fff;\r\n        font-size: 28rpx;\r\n        padding: 15rpx 0;\r\n    }\r\n}\r\n</style>","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/detail/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","addLiked","onLoad"],"mappings":";;;;;;;AAwFA,UAAM,OAAOA,cAAAA,IAAI;AAAA,MACb,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,WAAW;AAAA,MACX,IAAI;AAAA,MACJ,UAAU;AAAA,MACV,OAAO;AAAA,MACP,WAAW;AAAA,MACX,UAAU,CAAC,gCAAgC,8BAA8B;AAAA,MACzE,UAAU;AAAA,MACV,WAAW;AAAA,MACX,OAAO;AAAA,MACP,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,IAAA,CACZ;AAED,UAAM,QAAQ,MAAM;AAChB,YAAM,SAAS,KAAK,MAAMC,cAAAA,MAAI,eAAe,UAAU,CAAC,EAAE;AACtD,UAAA;AACAC,gBAAA,SAAS,QAAQ,KAAK,MAAM,SAAS,EAAE,KAAK,CAAO,QAAA;AAC/CD,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO,IAAI;AAAA,YACX,MAAM;AAAA,UAAA,CACT;AAAA,QAAA,CACJ;AAAA,eACI,GAAG;AAAMA,sBAAAA,MAAA,MAAM,OAAM,kCAAiC,CAAC;AAAA,MAAE;AAAA,IAAA;AAGhE,UAAA,eAAe,CAAC,QAAkB,YAAoB;AACxDA,oBAAAA,MAAI,aAAa;AAAA,QACb,MAAM;AAAA;AAAA,QACN,SAAS,OAAO,OAAO;AAAA;AAAA,MAAA,CAC1B;AAAA,IAAA;AAGLE,kBAAA,OAAO,CAAC,YAAY;AACZ,UAAA;AACA,YAAI,QAAQ,MAAM;AACd,gBAAM,cAAc,KAAK,MAAM,mBAAmB,QAAQ,IAAI,CAAC;AAC/D,eAAK,QAAQ;AAAA,QAAA,OACV;AACCF,wBAAAA,MAAA,MAAM,OAAM,kCAAiC,OAAO;AAAA,QAC5D;AAAA,eACK,GAAG;AACJA,sBAAAA,MAAA,MAAM,OAAM,kCAAiC,CAAC;AAAA,MACtD;AAAA,IAAA,CACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvID,GAAG,WAAW,eAAe;"}