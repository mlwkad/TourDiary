{"version":3,"file":"My.js","sources":["pages/My/My.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvTXkvTXkudnVl"],"sourcesContent":["<template>\n\t<view class=\"my-container\">\n\t\t<!-- 用户信息区域 -->\n\t\t<view class=\"user-info-section\" :class=\"{ 'logged-in': isLoggedIn }\">\n\t\t\t<view v-if=\"isLoggedIn\" class=\"user-profile\">\n\t\t\t\t<image class=\"user-avatar\" :src=\"userInfo.avatarUrl || '/static/666.jpg'\" mode=\"aspectFill\"></image>\n\t\t\t\t<view class=\"user-name\">\n\t\t\t\t\t{{ userInfo.nickName || '666' }}\n\t\t\t\t\t<image class=\"changeInfoIcon\" src=\"/static/public/change.png\" @click=\"isShow = true\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view v-else class=\"login-section\">\n\t\t\t\t<image class=\"default-avatar\" src=\"/static/666.jpg\" mode=\"aspectFill\"></image>\n\t\t\t\t<view class=\"login-btns\">\n\t\t\t\t\t<button class=\"login-btn\" @click=\"handleLogin\">登录</button>\n\t\t\t\t\t<button class=\"register-btn\" @click=\"handleRegister\">注册</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 功能选项区域 -->\n\t\t<view class=\"options-section\">\n\t\t\t<view class=\"option-group\">\n\t\t\t\t<view class=\"option-item\" @click=\"navigateTo('collection')\">\n\t\t\t\t\t<image class=\"option-icon\" src=\"/static/public/search.png\"></image>\n\t\t\t\t\t<text class=\"option-text\">我的收藏</text>\n\t\t\t\t\t<image class=\"arrow-icon\" src=\"/static/public/back.png\"></image>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"option-item\" @click=\"navigateTo('notes')\">\n\t\t\t\t\t<image class=\"option-icon\" src=\"/static/public/search.png\"></image>\n\t\t\t\t\t<text class=\"option-text\">我的笔记</text>\n\t\t\t\t\t<image class=\"arrow-icon\" src=\"/static/public/back.png\"></image>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"option-item\" @click=\"navigateTo('following')\">\n\t\t\t\t\t<image class=\"option-icon\" src=\"/static/public/search.png\"></image>\n\t\t\t\t\t<text class=\"option-text\">我的关注</text>\n\t\t\t\t\t<image class=\"arrow-icon\" src=\"/static/public/back.png\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"option-group\">\n\t\t\t\t<view class=\"option-item\" @click=\"navigateTo('settings')\">\n\t\t\t\t\t<image class=\"option-icon\" src=\"/static/public/search.png\"></image>\n\t\t\t\t\t<text class=\"option-text\">设置</text>\n\t\t\t\t\t<image class=\"arrow-icon\" src=\"/static/public/back.png\"></image>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"option-item\" @click=\"navigateTo('feedback')\">\n\t\t\t\t\t<image class=\"option-icon\" src=\"/static/public/search.png\"></image>\n\t\t\t\t\t<text class=\"option-text\">意见反馈</text>\n\t\t\t\t\t<image class=\"arrow-icon\" src=\"/static/public/back.png\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view v-if=\"isLoggedIn\" class=\"logout-btn\" @click=\"handleLogout\">\n\t\t\t\t退出登录\n\t\t\t</view>\n\t\t</view>\n\t</view>\n\t<view class=\"changeInfo\" v-if=\"isShow\">\n\t\t<view class=\"changeInfo-top\">\n\t\t\t<view class=\"changeInfo-top-title\">修改您的头像、昵称</view>\n\t\t\t<image class=\"changeInfo-top-close\" src=\"/static/public/close.png\" @click=\"isShow = false\"></image>\n\t\t</view>\n\t\t<view class=\"changeInfo-avatar\">\n\t\t\t头像:\n\t\t\t<!-- open-type=\"chooseAvatar\" 选择怎么设置头像 -->\n\t\t\t<button class=\"changeInfo-avatar-title\" open-type=\"chooseAvatar\" @chooseavatar=\"chooseavatar\">\n\t\t\t\t<image class=\"changeInfo-avatar-title-image\" :src=\"userInfo.avatarUrl\" mode=\"widthFix\"></image>\n\t\t\t</button>\n\t\t</view>\n\t\t<view class=\"changeInfo-nickname\">\n\t\t\t<view class=\"changeInfo-nickname-title\">昵称:</view>\n\t\t\t<!-- type=\"nickname\" 自动获取微信昵称 -->\n\t\t\t<input class=\"changeInfo-nickname-input\" type=\"nickname\" :placeholder='userInfo.nickName' />\n\t\t</view>\n\t\t<button class=\"changeInfo-ensure\">确定</button>\n\t</view>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive } from 'vue';\nimport { onLoad, onShow } from '@dcloudio/uni-app'\n\nlet isShow = ref<boolean>(false)\n// 用户信息\nconst isLoggedIn = ref<boolean>(false);\nconst userInfo = reactive({\n\tnickName: '',\n\tavatarUrl: '',\n\tuserId: ''\n});\n\n// 检查登录状态\nconst checkLoginStatus = () => {\n\tconst token = uni.getStorageSync('token')\n\tif (token) {\n\t\tisLoggedIn.value = true\n\t\t// 从本地获取用户信息\n\t\tconst savedUserInfo = uni.getStorageSync('userInfo')\n\t\tif (savedUserInfo) {\n\t\t\tObject.assign(userInfo, JSON.parse(savedUserInfo))\n\t\t}\n\t}\n};\n\n// 登录处理\nconst handleLogin = () => {\n\tuni.navigateTo({\n\t\turl: '/pages/login/login',\n\t\t// 切页动效,默认右侧滑入\n\t\t// animationType: 'slide-in-bottom',\n\t\t// animationDuration: 300\n\t})\n}\n\n// 注册处理\nconst handleRegister = () => {\n\tuni.navigateTo({\n\t\turl: '/pages/register/register',\n\t});\n};\n\n// 退出登录\nconst handleLogout = () => {\n\tuni.showModal({\n\t\ttitle: '提示',\n\t\tcontent: '确定要退出登录吗？',\n\t\tsuccess: (res) => {\n\t\t\tif (res.confirm) {\n\t\t\t\t// 清除登录信息\n\t\t\t\tuni.removeStorageSync('token')\n\t\t\t\tuni.removeStorageSync('userInfo')\n\t\t\t\tisLoggedIn.value = false\n\t\t\t\tObject.assign(userInfo, {\n\t\t\t\t\tnickName: '',\n\t\t\t\t\tavatarUrl: '',\n\t\t\t\t\tuserId: ''\n\t\t\t\t});\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '已退出登录',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n};\n\n// 更改头像\nconst chooseavatar = () => {\n}\n\n// 页面导航\nconst navigateTo = (page: string) => {\n\tif (!isLoggedIn.value) {\n\t\tuni.showModal({\n\t\t\ttitle: '提示',\n\t\t\tcontent: '请先登录',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\thandleLogin()\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn;\n\t}\n\n\tconst pageMap: Record<string, string> = {\n\t\tcollection: '/pages/collection/collection',\n\t\tnotes: '/pages/notes/notes',\n\t\tfollowing: '/pages/following/following',\n\t\tsettings: '/pages/settings/settings',\n\t\tfeedback: '/pages/feedback/feedback'\n\t};\n\n\tuni.navigateTo({\n\t\turl: pageMap[page]\n\t});\n};\n\n// 页面加载时检查登录状态\nonLoad(() => {\n\tcheckLoginStatus();\n});\n\n// 页面显示时检查登录状态，处理从登录页返回的情况\nonShow(() => {\n\tcheckLoginStatus();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.my-container {\n\twidth: 100%;\n\tmin-height: 100vh;\n\tbackground-color: #f5f5f5;\n\n\t.user-info-section {\n\t\tbackground: linear-gradient(to right, #4bb0ff, #61e4ff);\n\t\tpadding: 40rpx 30rpx;\n\t\tmargin-bottom: 20rpx;\n\n\t\t.user-profile {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: center;\n\n\t\t\t.user-avatar {\n\t\t\t\twidth: 180rpx;\n\t\t\t\theight: 180rpx;\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tborder: 4rpx solid #fff;\n\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t}\n\n\t\t\t.user-name {\n\t\t\t\tfont-size: 36rpx;\n\t\t\t\tcolor: #fff;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tgap: 15rpx;\n\n\t\t\t\t.changeInfoIcon {\n\t\t\t\t\ttransform: translateY(3rpx);\n\t\t\t\t\twidth: 35rpx;\n\t\t\t\t\theight: 35rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.login-section {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: center;\n\n\t\t\t.default-avatar {\n\t\t\t\twidth: 180rpx;\n\t\t\t\theight: 180rpx;\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tborder: 4rpx solid #fff;\n\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t}\n\n\t\t\t.login-btns {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: 20rpx;\n\n\t\t\t\t.login-btn,\n\t\t\t\t.register-btn {\n\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\tcolor: #4bb0ff;\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tpadding: 15rpx 40rpx;\n\t\t\t\t\tborder-radius: 30rpx;\n\t\t\t\t\tborder: none;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.options-section {\n\t\tpadding: 0 20rpx;\n\n\t\t.option-group {\n\t\t\tbackground-color: #fff;\n\t\t\tborder-radius: 15rpx;\n\t\t\tmargin-bottom: 20rpx;\n\t\t\toverflow: hidden;\n\n\t\t\t.option-item {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 30rpx 20rpx;\n\t\t\t\tborder-bottom: 1rpx solid rgba(0, 0, 0, 0.05);\n\n\t\t\t\t&:last-child {\n\t\t\t\t\tborder-bottom: none;\n\t\t\t\t}\n\n\t\t\t\t.option-icon {\n\t\t\t\t\twidth: 50rpx;\n\t\t\t\t\theight: 50rpx;\n\t\t\t\t\tmargin-right: 20rpx;\n\t\t\t\t}\n\n\t\t\t\t.option-text {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tfont-size: 30rpx;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t}\n\n\t\t\t\t.arrow-icon {\n\t\t\t\t\twidth: 30rpx;\n\t\t\t\t\theight: 30rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.logout-btn {\n\t\t\tbackground-color: #fff;\n\t\t\tcolor: #ff4b4b;\n\t\t\ttext-align: center;\n\t\t\tpadding: 30rpx 0;\n\t\t\tborder-radius: 15rpx;\n\t\t\tfont-size: 32rpx;\n\t\t\tmargin-top: 30rpx;\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n\n.changeInfo {\n\twidth: 100%;\n\theight: fit-content;\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tbackground-color: #ffffff;\n\tpadding-top: 15rpx;\n\tborder-radius: 20rpx 20rpx 0 0;\n\tbox-shadow: 0 -5rpx 10px rgba(128, 128, 128, 0.433);\n\tanimation: hua 0.3s ease-in-out forwards;\n\n\t@keyframes hua {\n\t\t0% {\n\t\t\ttransform: translateY(50%);\n\t\t\topacity: 0;\n\t\t}\n\n\t\t100% {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}\n\n\t&-top {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tposition: relative;\n\t\tjustify-content: center;\n\t\tpadding-bottom: 15rpx;\n\n\t\t&-title {\n\t\t\tfont-size: 45rpx;\n\t\t\ttransform: translateX();\n\t\t}\n\n\t\t&-close {\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\tright: 5%;\n\t\t\ttransform: translateY(-60%);\n\t\t\twidth: 20rpx;\n\t\t\theight: 20rpx;\n\t\t}\n\t}\n\n\t&-avatar {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 100rpx;\n\t\tborder-top: solid 1rpx rgba(128, 128, 128, 0.449);\n\t\tpadding-left: 45rpx;\n\n\t\t&-title {\n\t\t\tmargin: 0;\n\t\t\tmargin-left: 45rpx;\n\t\t\tpadding: 0;\n\t\t\theight: 70rpx;\n\n\t\t\t&-image {\n\t\t\t\twidth: 70rpx;\n\t\t\t\theight: 70rpx;\n\t\t\t}\n\t\t}\n\n\n\t}\n\n\t&-nickname {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 100rpx;\n\t\tborder-top: solid 1rpx rgba(128, 128, 128, 0.421);\n\t\tborder-bottom: solid 1rpx rgba(128, 128, 128, 0.421);\n\t\tpadding-left: 45rpx;\n\n\t\t// &-title {}\n\n\t\t&-input {\n\t\t\tpadding-left: 45rpx;\n\t\t}\n\t}\n\n\t&-ensure {\n\t\tbackground-color: rgb(52, 179, 52);\n\t\tborder-radius: 24rpx;\n\t\twidth: 40%;\n\t\tmargin: 0 auto;\n\t\tmargin-top: 15rpx;\n\t\tmargin-bottom: 15rpx;\n\t\tborder: solid 2px rgba(242, 246, 242, 0.629);\n\t\tcolor: white;\n\t}\n\n}\n</style>\n","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/My/My.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","uni","onLoad","onShow"],"mappings":";;;;;;AAsFI,QAAA,SAASA,kBAAa,KAAK;AAEzB,UAAA,aAAaA,kBAAa,KAAK;AACrC,UAAM,WAAWC,cAAAA,SAAS;AAAA,MACzB,UAAU;AAAA,MACV,WAAW;AAAA,MACX,QAAQ;AAAA,IAAA,CACR;AAGD,UAAM,mBAAmB,MAAM;AACxB,YAAA,QAAQC,cAAAA,MAAI,eAAe,OAAO;AACxC,UAAI,OAAO;AACV,mBAAW,QAAQ;AAEb,cAAA,gBAAgBA,cAAAA,MAAI,eAAe,UAAU;AACnD,YAAI,eAAe;AAClB,iBAAO,OAAO,UAAU,KAAK,MAAM,aAAa,CAAC;AAAA,QAClD;AAAA,MACD;AAAA,IAAA;AAID,UAAM,cAAc,MAAM;AACzBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA;AAAA;AAAA;AAAA,MAAA,CAIL;AAAA,IAAA;AAIF,UAAM,iBAAiB,MAAM;AAC5BA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MAAA,CACL;AAAA,IAAA;AAIF,UAAM,eAAe,MAAM;AAC1BA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAEhBA,gCAAI,kBAAkB,OAAO;AAC7BA,gCAAI,kBAAkB,UAAU;AAChC,uBAAW,QAAQ;AACnB,mBAAO,OAAO,UAAU;AAAA,cACvB,UAAU;AAAA,cACV,WAAW;AAAA,cACX,QAAQ;AAAA,YAAA,CACR;AACDA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YAAA,CACN;AAAA,UACF;AAAA,QACD;AAAA,MAAA,CACA;AAAA,IAAA;AAIF,UAAM,eAAe,MAAM;AAAA,IAAA;AAIrB,UAAA,aAAa,CAAC,SAAiB;AAChC,UAAA,CAAC,WAAW,OAAO;AACtBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,SAAS,CAAC,QAAQ;AACjB,gBAAI,IAAI,SAAS;AACJ;YACb;AAAA,UACD;AAAA,QAAA,CACA;AACD;AAAA,MACD;AAEA,YAAM,UAAkC;AAAA,QACvC,YAAY;AAAA,QACZ,OAAO;AAAA,QACP,WAAW;AAAA,QACX,UAAU;AAAA,QACV,UAAU;AAAA,MAAA;AAGXA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,QAAQ,IAAI;AAAA,MAAA,CACjB;AAAA,IAAA;AAIFC,kBAAAA,OAAO,MAAM;AACK;IAAA,CACjB;AAGDC,kBAAAA,OAAO,MAAM;AACK;IAAA,CACjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7LD,GAAG,WAAW,eAAe;"}