{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n    <view class=\"login-container\">\r\n        <view class=\"login-header\">\r\n            <image class=\"back-icon\" src=\"/static/public/back.png\" @click=\"goBack\"></image>\r\n            <text class=\"header-title\">用户登录</text>\r\n        </view>\r\n\r\n        <view class=\"login-form\">\r\n            <view class=\"avatar-container\">\r\n                <image class=\"avatar\" src=\"/static/666.jpg\" mode=\"aspectFill\"></image>\r\n            </view>\r\n\r\n            <view class=\"input-group\">\r\n                <view class=\"input-item\">\r\n                    <text class=\"input-label\">用户名</text>\r\n                    <input class=\"input-field\" type=\"text\" v-model=\"username\" placeholder=\"请输入用户名\" />\r\n                </view>\r\n\r\n                <view class=\"input-item\">\r\n                    <text class=\"input-label\">密码</text>\r\n                    <input class=\"input-field\" type=\"password\" v-model=\"password\" placeholder=\"请输入密码\" />\r\n                </view>\r\n            </view>\r\n\r\n            <view class=\"login-options\">\r\n                <text class=\"forget-password\" @click=\"forgetPassword\">忘记密码?</text>\r\n                <text class=\"register-link\" @click=\"goToRegister\">没有账号? 去注册</text>\r\n            </view>\r\n\r\n            <button class=\"login-button\" @click=\"handleLogin\">登录</button>\r\n\r\n            <view class=\"wechat-login\">\r\n                <text class=\"wechat-login-text\">微信快速登录</text>\r\n                <button class=\"wechat-login-button\" @click=\"wechatLogin\">\r\n                    <text>微信登录</text>\r\n                </button>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue';\r\n\r\nconst username = ref<string>('');\r\nconst password = ref<string>('');\r\n\r\n// 登录处理\r\nconst handleLogin = () => {\r\n    if (!username.value || !password.value) {\r\n        uni.showToast({\r\n            title: '请输入用户名和密码',\r\n            icon: 'none'\r\n        });\r\n        return;\r\n    }\r\n\r\n    // 这里应调用实际的登录API\r\n    // 模拟登录成功\r\n    uni.showLoading({\r\n        title: '登录中...'\r\n    });\r\n\r\n    setTimeout(() => {\r\n        uni.hideLoading();\r\n\r\n        // 模拟登录成功，存储用户信息\r\n        const userInfo = {\r\n            nickName: username.value,\r\n            avatarUrl: '/static/666.jpg',\r\n            userId: '12345'\r\n        };\r\n\r\n        uni.setStorageSync('token', 'sample-token');\r\n        uni.setStorageSync('userInfo', JSON.stringify(userInfo));\r\n\r\n        uni.showToast({\r\n            title: '登录成功',\r\n            icon: 'success'\r\n        });\r\n\r\n        setTimeout(() => {\r\n            uni.navigateBack();\r\n        }, 1500);\r\n    }, 1500);\r\n};\r\n\r\n// 微信登录\r\nconst wechatLogin = () => {\r\n    uni.showLoading({\r\n        title: '登录中...'\r\n    });\r\n\r\n    // 在以前，uni.getUserInfo 可以直接弹出授权框，用户授权后就能获取其信息(包含基础数据和 encryptedData、iv 等加密数据)。\r\n    // 但为了更好地保护用户隐私，自 2021 年 4 月 13 日起，微信调整了规则\r\n    // 若用户未授权过，调用 uni.getUserInfo 不会弹出授权弹窗，而是直接进入 fail 回调。\r\n    // 所以现在要先通过 uni.getUserProfile 让用户主动授权,该方法也能拿到基础数据,不能拿加密数据。\r\n\r\n    uni.getUserInfo({\r\n        success(data) {\r\n            uni.__f__('log','at pages/login/login.vue:101','data', data)\r\n        }\r\n    })\r\n\r\n    uni.getUserProfile({\r\n        success(data) {\r\n            uni.__f__('log','at pages/login/login.vue:107','AAAdata', data)\r\n        }\r\n    })\r\n\r\n    // 模拟微信登录\r\n    setTimeout(() => {\r\n        uni.hideLoading();\r\n\r\n        const userInfo = {\r\n            nickName: '微信用户',\r\n            avatarUrl: '/static/666.jpg',\r\n            userId: 'wx12345'\r\n        };\r\n\r\n        uni.setStorageSync('token', 'wx-token');\r\n        uni.setStorageSync('userInfo', JSON.stringify(userInfo));\r\n\r\n        uni.showToast({\r\n            title: '登录成功',\r\n            icon: 'success'\r\n        });\r\n\r\n        setTimeout(() => {\r\n            uni.navigateBack();\r\n        }, 1500);\r\n    }, 1500);\r\n};\r\n\r\n// 忘记密码\r\nconst forgetPassword = () => {\r\n    uni.showToast({\r\n        title: '忘记密码功能暂未开放',\r\n        icon: 'none'\r\n    });\r\n};\r\n\r\n// 返回上一页\r\nconst goBack = () => {\r\n    uni.navigateBack();\r\n};\r\n\r\n// 跳转到注册页\r\nconst goToRegister = () => {\r\n    uni.navigateTo({\r\n        url: '/pages/register/register'\r\n    });\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login-container {\r\n    background-color: #ffffff;\r\n    min-height: 100vh;\r\n\r\n    .login-header {\r\n        display: flex;\r\n        align-items: center;\r\n        padding: 20rpx;\r\n        position: relative;\r\n\r\n        .back-icon {\r\n            width: 40rpx;\r\n            height: 40rpx;\r\n        }\r\n\r\n        .header-title {\r\n            flex: 1;\r\n            text-align: center;\r\n            font-size: 36rpx;\r\n            font-weight: bold;\r\n            color: #333;\r\n        }\r\n    }\r\n\r\n    .login-form {\r\n        padding: 30rpx;\r\n\r\n        .avatar-container {\r\n            display: flex;\r\n            justify-content: center;\r\n            margin: 30rpx 0 50rpx;\r\n\r\n            .avatar {\r\n                width: 150rpx;\r\n                height: 150rpx;\r\n                border-radius: 50%;\r\n                border: 4rpx solid #4bb0ff;\r\n            }\r\n        }\r\n\r\n        .input-group {\r\n            margin-bottom: 40rpx;\r\n\r\n            .input-item {\r\n                margin-bottom: 30rpx;\r\n\r\n                .input-label {\r\n                    font-size: 28rpx;\r\n                    color: #666;\r\n                    margin-bottom: 15rpx;\r\n                    display: block;\r\n                    margin-left: 15rpx;\r\n                }\r\n\r\n                .input-field {\r\n                    width: 91%;\r\n                    height: 80rpx;\r\n                    background-color: #f5f5f5;\r\n                    border-radius: 40rpx;\r\n                    padding: 0 30rpx;\r\n                    font-size: 28rpx;\r\n                }\r\n            }\r\n        }\r\n\r\n        .login-options {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            margin-bottom: 40rpx;\r\n\r\n            .forget-password,\r\n            .register-link {\r\n                font-size: 26rpx;\r\n                color: #4bb0ff;\r\n            }\r\n        }\r\n\r\n        .login-button {\r\n            width: 100%;\r\n            height: 90rpx;\r\n            background: linear-gradient(to right, #4bb0ff, #61e4ff);\r\n            color: #fff;\r\n            font-size: 32rpx;\r\n            font-weight: bold;\r\n            border-radius: 45rpx;\r\n            margin-bottom: 50rpx;\r\n            line-height: 90rpx;\r\n        }\r\n\r\n        .wechat-login {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n\r\n            .wechat-login-text {\r\n                font-size: 28rpx;\r\n                color: #999;\r\n                margin-bottom: 30rpx;\r\n            }\r\n\r\n            .wechat-login-button {\r\n                width: 60%;\r\n                height: 90rpx;\r\n                background-color: #07c160;\r\n                color: #fff;\r\n                font-size: 32rpx;\r\n                font-weight: bold;\r\n                border-radius: 45rpx;\r\n                line-height: 90rpx;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni"],"mappings":";;;;;;AA4CM,UAAA,WAAWA,kBAAY,EAAE;AACzB,UAAA,WAAWA,kBAAY,EAAE;AAG/B,UAAM,cAAc,MAAM;AACtB,UAAI,CAAC,SAAS,SAAS,CAAC,SAAS,OAAO;AACpCC,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACT;AACD;AAAA,MACJ;AAIAA,oBAAAA,MAAI,YAAY;AAAA,QACZ,OAAO;AAAA,MAAA,CACV;AAED,iBAAW,MAAM;AACbA,sBAAA,MAAI,YAAY;AAGhB,cAAM,WAAW;AAAA,UACb,UAAU,SAAS;AAAA,UACnB,WAAW;AAAA,UACX,QAAQ;AAAA,QAAA;AAGRA,sBAAAA,MAAA,eAAe,SAAS,cAAc;AAC1CA,sBAAA,MAAI,eAAe,YAAY,KAAK,UAAU,QAAQ,CAAC;AAEvDA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACT;AAED,mBAAW,MAAM;AACbA,wBAAA,MAAI,aAAa;AAAA,WAClB,IAAI;AAAA,SACR,IAAI;AAAA,IAAA;AAIX,UAAM,cAAc,MAAM;AACtBA,oBAAAA,MAAI,YAAY;AAAA,QACZ,OAAO;AAAA,MAAA,CACV;AAODA,oBAAAA,MAAI,YAAY;AAAA,QACZ,QAAQ,MAAM;AACVA,wBAAA,MAAI,MAAM,OAAM,gCAA+B,QAAQ,IAAI;AAAA,QAC/D;AAAA,MAAA,CACH;AAEDA,oBAAAA,MAAI,eAAe;AAAA,QACf,QAAQ,MAAM;AACVA,wBAAA,MAAI,MAAM,OAAM,gCAA+B,WAAW,IAAI;AAAA,QAClE;AAAA,MAAA,CACH;AAGD,iBAAW,MAAM;AACbA,sBAAA,MAAI,YAAY;AAEhB,cAAM,WAAW;AAAA,UACb,UAAU;AAAA,UACV,WAAW;AAAA,UACX,QAAQ;AAAA,QAAA;AAGRA,sBAAAA,MAAA,eAAe,SAAS,UAAU;AACtCA,sBAAA,MAAI,eAAe,YAAY,KAAK,UAAU,QAAQ,CAAC;AAEvDA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACT;AAED,mBAAW,MAAM;AACbA,wBAAA,MAAI,aAAa;AAAA,WAClB,IAAI;AAAA,SACR,IAAI;AAAA,IAAA;AAIX,UAAM,iBAAiB,MAAM;AACzBA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,MAAM;AAAA,MAAA,CACT;AAAA,IAAA;AAIL,UAAM,SAAS,MAAM;AACjBA,oBAAA,MAAI,aAAa;AAAA,IAAA;AAIrB,UAAM,eAAe,MAAM;AACvBA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK;AAAA,MAAA,CACR;AAAA,IAAA;;;;;;;;;;;;;;;;;;;ACtJL,GAAG,WAAW,eAAe;"}