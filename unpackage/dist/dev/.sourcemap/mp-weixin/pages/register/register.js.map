{"version":3,"file":"register.js","sources":["pages/register/register.vue","../../uniapp/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIudnVl"],"sourcesContent":["<template>\r\n    <view class=\"register-container\">\r\n        <view class=\"register-header\">\r\n            <image class=\"back-icon\" src=\"/static/public/back.png\" @click=\"goBack\"></image>\r\n            <text class=\"header-title\">用户注册</text>\r\n        </view>\r\n\r\n        <view class=\"register-form\">\r\n            <view class=\"avatar-container\">\r\n                <image class=\"avatar\" src=\"/static/666.jpg\" mode=\"aspectFill\"></image>\r\n                <view class=\"avatar-upload\">\r\n                    <text>点击更换头像</text>\r\n                </view>\r\n            </view>\r\n\r\n            <view class=\"input-group\">\r\n                <view class=\"input-item\">\r\n                    <text class=\"input-label\">用户名</text>\r\n                    <input class=\"input-field\" type=\"text\" v-model=\"username\" placeholder=\"请输入用户名\" />\r\n                </view>\r\n\r\n                <view class=\"input-item\">\r\n                    <text class=\"input-label\">密码</text>\r\n                    <input class=\"input-field\" type=\"password\" v-model=\"password\" placeholder=\"请输入密码\" />\r\n                </view>\r\n\r\n                <view class=\"input-item\">\r\n                    <text class=\"input-label\">确认密码</text>\r\n                    <input class=\"input-field\" type=\"password\" v-model=\"confirmPassword\" placeholder=\"请再次输入密码\" />\r\n                </view>\r\n            </view>\r\n\r\n            <view class=\"register-options\">\r\n                <text class=\"login-link\" @click=\"goToLogin\">已有账号? 去登录</text>\r\n            </view>\r\n\r\n            <button class=\"register-button\" @click=\"handleRegister\">注册</button>\r\n\r\n            <view class=\"wechat-register\">\r\n                <text class=\"wechat-register-text\">微信快速注册</text>\r\n                <button class=\"wechat-register-button\" @click=\"wechatRegister\">\r\n                    <text>微信注册</text>\r\n                </button>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport { signUp } from '../../api/api'\r\nconst username = ref<string>('')\r\nconst password = ref<string>('')\r\nconst confirmPassword = ref<string>('')\r\n\r\n// 注册处理\r\nconst handleRegister = () => {\r\n    if (!username.value || !password.value || !confirmPassword.value) {\r\n        uni.showToast({\r\n            title: '请填写完整信息',\r\n            icon: 'none'\r\n        })\r\n        return\r\n    }\r\n\r\n    if (username.value.length < 3) {\r\n        uni.showToast({\r\n            title: '用户名长度应大于3小于20位',\r\n            icon: 'none'\r\n        })\r\n        return\r\n    }\r\n\r\n    if (password.value !== confirmPassword.value) {\r\n        uni.showToast({\r\n            title: '两次密码输入不一致',\r\n            icon: 'none'\r\n        })\r\n        return\r\n    }\r\n\r\n    uni.showLoading({\r\n        title: '注册中...'\r\n    })\r\n\r\n    const userInfo = {\r\n        nickName: username.value,\r\n        avatarUrl: '/static/666.jpg',\r\n        userId: ''\r\n    };\r\n\r\n    try {\r\n        signUp({\r\n            userName: username.value,\r\n            passWord: password.value\r\n        }).then(async res => {\r\n            uni.__f__('log','at pages/register/register.vue:97',res)\r\n\r\n            userInfo.nickName = username.value\r\n            userInfo.avatarUrl = '/static/666.jpg'\r\n            userInfo.userId = res.userID\r\n            uni.setStorageSync('token', 'sample-token')\r\n            uni.setStorageSync('userInfo', JSON.stringify(userInfo))\r\n            uni.hideLoading()\r\n            await new Promise(resolve => {\r\n                uni.showToast({\r\n                    title: '注册成功',\r\n                    icon: 'success'\r\n                })\r\n                setTimeout(() => {\r\n                    resolve()\r\n                }, 1000)\r\n            })\r\n            uni.navigateBack()\r\n        })\r\n    } catch (error) {\r\n        uni.__f__('log','at pages/register/register.vue:117',error)\r\n    }\r\n}\r\n\r\n// 微信注册\r\nconst wechatRegister = () => {\r\n    uni.showLoading({\r\n        title: '注册中...'\r\n    })\r\n\r\n    // 模拟微信注册\r\n    setTimeout(() => {\r\n        uni.hideLoading()\r\n\r\n        const userInfo = {\r\n            nickName: '微信用户',\r\n            avatarUrl: '/static/666.jpg',\r\n            userId: 'wx' + Date.now()\r\n        }\r\n\r\n        uni.setStorageSync('token', 'wx-token');\r\n        uni.setStorageSync('userInfo', JSON.stringify(userInfo))\r\n\r\n        uni.showToast({\r\n            title: '注册成功',\r\n            icon: 'success'\r\n        })\r\n\r\n        setTimeout(() => {\r\n            uni.navigateBack({\r\n                delta: 2  // 返回两层，跳过登录页回到我的页面\r\n            })\r\n        }, 1500)\r\n    }, 1500)\r\n};\r\n\r\n// 返回上一页\r\nconst goBack = () => {\r\n    uni.navigateBack()\r\n}\r\n\r\n// 跳转到登录页\r\nconst goToLogin = () => {\r\n    uni.navigateBack()\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.register-container {\r\n    background-color: #ffffff;\r\n    min-height: 100vh;\r\n\r\n    .register-header {\r\n        display: flex;\r\n        align-items: center;\r\n        padding: 20rpx;\r\n        position: relative;\r\n\r\n        .back-icon {\r\n            width: 40rpx;\r\n            height: 40rpx;\r\n        }\r\n\r\n        .header-title {\r\n            flex: 1;\r\n            text-align: center;\r\n            font-size: 36rpx;\r\n            font-weight: bold;\r\n            color: #333;\r\n        }\r\n    }\r\n\r\n    .register-form {\r\n        padding: 30rpx;\r\n\r\n        .avatar-container {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            margin: 30rpx 0 50rpx;\r\n            position: relative;\r\n\r\n            .avatar {\r\n                width: 180rpx;\r\n                height: 180rpx;\r\n                border-radius: 50%;\r\n                border: 4rpx solid #4bb0ff;\r\n            }\r\n\r\n            .avatar-upload {\r\n                margin-top: 15rpx;\r\n                font-size: 24rpx;\r\n                color: #4bb0ff;\r\n            }\r\n        }\r\n\r\n        .input-group {\r\n            margin-bottom: 40rpx;\r\n\r\n            .input-item {\r\n                margin-bottom: 30rpx;\r\n\r\n                .input-label {\r\n                    font-size: 28rpx;\r\n                    color: #666;\r\n                    margin-bottom: 15rpx;\r\n                    display: block;\r\n                }\r\n\r\n                .input-field {\r\n                    width: 100%;\r\n                    height: 80rpx;\r\n                    background-color: #f5f5f5;\r\n                    border-radius: 40rpx;\r\n                    padding: 0 30rpx;\r\n                    font-size: 28rpx;\r\n                }\r\n            }\r\n        }\r\n\r\n        .register-options {\r\n            display: flex;\r\n            justify-content: flex-end;\r\n            margin-bottom: 40rpx;\r\n\r\n            .login-link {\r\n                font-size: 26rpx;\r\n                color: #4bb0ff;\r\n            }\r\n        }\r\n\r\n        .register-button {\r\n            width: 100%;\r\n            height: 90rpx;\r\n            background: linear-gradient(to right, #4bb0ff, #61e4ff);\r\n            color: #fff;\r\n            font-size: 32rpx;\r\n            font-weight: bold;\r\n            border-radius: 45rpx;\r\n            margin-bottom: 50rpx;\r\n            line-height: 90rpx;\r\n        }\r\n\r\n        .wechat-register {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n\r\n            .wechat-register-text {\r\n                font-size: 28rpx;\r\n                color: #999;\r\n                margin-bottom: 30rpx;\r\n            }\r\n\r\n            .wechat-register-button {\r\n                width: 60%;\r\n                height: 90rpx;\r\n                background-color: #07c160;\r\n                color: #fff;\r\n                font-size: 32rpx;\r\n                font-weight: bold;\r\n                border-radius: 45rpx;\r\n                line-height: 90rpx;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import MiniProgramPage from 'D:/uniappProject/旅游日记uniapp/pages/register/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","signUp"],"mappings":";;;;;;;AAmDM,UAAA,WAAWA,kBAAY,EAAE;AACzB,UAAA,WAAWA,kBAAY,EAAE;AACzB,UAAA,kBAAkBA,kBAAY,EAAE;AAGtC,UAAM,iBAAiB,MAAM;AACrB,UAAA,CAAC,SAAS,SAAS,CAAC,SAAS,SAAS,CAAC,gBAAgB,OAAO;AAC9DC,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACT;AACD;AAAA,MACJ;AAEI,UAAA,SAAS,MAAM,SAAS,GAAG;AAC3BA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACT;AACD;AAAA,MACJ;AAEI,UAAA,SAAS,UAAU,gBAAgB,OAAO;AAC1CA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACT;AACD;AAAA,MACJ;AAEAA,oBAAAA,MAAI,YAAY;AAAA,QACZ,OAAO;AAAA,MAAA,CACV;AAED,YAAM,WAAW;AAAA,QACb,UAAU,SAAS;AAAA,QACnB,WAAW;AAAA,QACX,QAAQ;AAAA,MAAA;AAGR,UAAA;AACOC,uBAAA;AAAA,UACH,UAAU,SAAS;AAAA,UACnB,UAAU,SAAS;AAAA,QAAA,CACtB,EAAE,KAAK,OAAM,QAAO;AACbD,wBAAAA,MAAA,MAAM,OAAM,qCAAoC,GAAG;AAEvD,mBAAS,WAAW,SAAS;AAC7B,mBAAS,YAAY;AACrB,mBAAS,SAAS,IAAI;AAClBA,wBAAAA,MAAA,eAAe,SAAS,cAAc;AAC1CA,wBAAA,MAAI,eAAe,YAAY,KAAK,UAAU,QAAQ,CAAC;AACvDA,wBAAA,MAAI,YAAY;AACV,gBAAA,IAAI,QAAQ,CAAW,YAAA;AACzBA,0BAAAA,MAAI,UAAU;AAAA,cACV,OAAO;AAAA,cACP,MAAM;AAAA,YAAA,CACT;AACD,uBAAW,MAAM;AACL;eACT,GAAI;AAAA,UAAA,CACV;AACDA,wBAAA,MAAI,aAAa;AAAA,QAAA,CACpB;AAAA,eACI,OAAO;AACRA,sBAAAA,MAAA,MAAM,OAAM,sCAAqC,KAAK;AAAA,MAC9D;AAAA,IAAA;AAIJ,UAAM,iBAAiB,MAAM;AACzBA,oBAAAA,MAAI,YAAY;AAAA,QACZ,OAAO;AAAA,MAAA,CACV;AAGD,iBAAW,MAAM;AACbA,sBAAA,MAAI,YAAY;AAEhB,cAAM,WAAW;AAAA,UACb,UAAU;AAAA,UACV,WAAW;AAAA,UACX,QAAQ,OAAO,KAAK,IAAI;AAAA,QAAA;AAGxBA,sBAAAA,MAAA,eAAe,SAAS,UAAU;AACtCA,sBAAA,MAAI,eAAe,YAAY,KAAK,UAAU,QAAQ,CAAC;AAEvDA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACT;AAED,mBAAW,MAAM;AACbA,wBAAAA,MAAI,aAAa;AAAA,YACb,OAAO;AAAA;AAAA,UAAA,CACV;AAAA,WACF,IAAI;AAAA,SACR,IAAI;AAAA,IAAA;AAIX,UAAM,SAAS,MAAM;AACjBA,oBAAA,MAAI,aAAa;AAAA,IAAA;AAIrB,UAAM,YAAY,MAAM;AACpBA,oBAAA,MAAI,aAAa;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;AC9JrB,GAAG,WAAW,eAAe;"}